import{g as Cl,a as Ii,r as jl,b as C,R as Il}from"./react-vendors-Ci5wmMRK.js";var ws={exports:{}},_s={},wo;function bd(){return wo||(wo=1,(function(t){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,r=5;function n(D,z){var oe=D.length;D.push(z),o(D,z,oe)}function s(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var z=D[0],oe=D.pop();return oe!==z&&(D[0]=oe,a(D,oe,0)),z}function o(D,z,oe){for(var he=oe;he>0;){var je=he-1>>>1,ze=D[je];if(l(ze,z)>0)D[je]=z,D[he]=ze,he=je;else return}}function a(D,z,oe){for(var he=oe,je=D.length,ze=je>>>1;he<ze;){var Ue=(he+1)*2-1,_t=D[Ue],Be=Ue+1,pt=D[Be];if(l(_t,z)<0)Be<je&&l(pt,_t)<0?(D[he]=pt,D[Be]=z,he=Be):(D[he]=_t,D[Ue]=z,he=Ue);else if(Be<je&&l(pt,z)<0)D[he]=pt,D[Be]=z,he=Be;else return}}function l(D,z){var oe=D.sortIndex-z.sortIndex;return oe!==0?oe:D.id-z.id}var c=1,u=2,d=3,h=4,f=5;function g(D,z){}var p=typeof performance=="object"&&typeof performance.now=="function";if(p){var m=performance;t.unstable_now=function(){return m.now()}}else{var S=Date,v=S.now();t.unstable_now=function(){return S.now()-v}}var _=1073741823,E=-1,A=250,I=5e3,b=1e4,R=_,j=[],q=[],ge=1,L=null,ee=d,ie=!1,ye=!1,te=!1,Se=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,Ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var z=s(q);z!==null;){if(z.callback===null)i(q);else if(z.startTime<=D)i(q),z.sortIndex=z.expirationTime,n(j,z);else return;z=s(q)}}function P(D){if(te=!1,x(D),!ye)if(s(j)!==null)ye=!0,ft(F);else{var z=s(q);z!==null&&ir(P,z.startTime-D)}}function F(D,z){ye=!1,te&&(te=!1,or()),ie=!0;var oe=ee;try{var he;if(!e)return U(D,z)}finally{L=null,ee=oe,ie=!1}}function U(D,z){var oe=z;for(x(oe),L=s(j);L!==null&&!(L.expirationTime>oe&&(!D||yn()));){var he=L.callback;if(typeof he=="function"){L.callback=null,ee=L.priorityLevel;var je=L.expirationTime<=oe,ze=he(je);oe=t.unstable_now(),typeof ze=="function"?L.callback=ze:L===s(j)&&i(j),x(oe)}else i(j);L=s(j)}if(L!==null)return!0;var Ue=s(q);return Ue!==null&&ir(P,Ue.startTime-oe),!1}function G(D,z){switch(D){case c:case u:case d:case h:case f:break;default:D=d}var oe=ee;ee=D;try{return z()}finally{ee=oe}}function Y(D){var z;switch(ee){case c:case u:case d:z=d;break;default:z=ee;break}var oe=ee;ee=z;try{return D()}finally{ee=oe}}function K(D){var z=ee;return function(){var oe=ee;ee=z;try{return D.apply(this,arguments)}finally{ee=oe}}}function X(D,z,oe){var he=t.unstable_now(),je;if(typeof oe=="object"&&oe!==null){var ze=oe.delay;typeof ze=="number"&&ze>0?je=he+ze:je=he}else je=he;var Ue;switch(D){case c:Ue=E;break;case u:Ue=A;break;case f:Ue=R;break;case h:Ue=b;break;case d:default:Ue=I;break}var _t=je+Ue,Be={id:ge++,callback:z,priorityLevel:D,startTime:je,expirationTime:_t,sortIndex:-1};return je>he?(Be.sortIndex=je,n(q,Be),s(j)===null&&Be===s(q)&&(te?or():te=!0,ir(P,je-he))):(Be.sortIndex=_t,n(j,Be),!ye&&!ie&&(ye=!0,ft(F))),Be}function ne(){}function le(){!ye&&!ie&&(ye=!0,ft(F))}function se(){return s(j)}function Ee(D){D.callback=null}function ue(){return ee}var $e=!1,Mt=null,Ir=-1,rt=r,mn=-1;function yn(){var D=t.unstable_now()-mn;return!(D<rt)}function vn(){}function ms(D){if(D<0||D>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}D>0?rt=Math.floor(1e3/D):rt=r}var Dr=function(){if(Mt!==null){var D=t.unstable_now();mn=D;var z=!0,oe=!0;try{oe=Mt(z,D)}finally{oe?Vt():($e=!1,Mt=null)}}else $e=!1},Vt;if(typeof Ae=="function")Vt=function(){Ae(Dr)};else if(typeof MessageChannel<"u"){var bn=new MessageChannel,ht=bn.port2;bn.port1.onmessage=Dr,Vt=function(){ht.postMessage(null)}}else Vt=function(){Se(Dr,0)};function ft(D){Mt=D,$e||($e=!0,Vt())}function ir(D,z){Ir=Se(function(){D(t.unstable_now())},z)}function or(){de(Ir),Ir=-1}var ct=vn,nt=null;t.unstable_IdlePriority=f,t.unstable_ImmediatePriority=c,t.unstable_LowPriority=h,t.unstable_NormalPriority=d,t.unstable_Profiling=nt,t.unstable_UserBlockingPriority=u,t.unstable_cancelCallback=Ee,t.unstable_continueExecution=le,t.unstable_forceFrameRate=ms,t.unstable_getCurrentPriorityLevel=ue,t.unstable_getFirstCallbackNode=se,t.unstable_next=Y,t.unstable_pauseExecution=ne,t.unstable_requestPaint=ct,t.unstable_runWithPriority=G,t.unstable_scheduleCallback=X,t.unstable_shouldYield=yn,t.unstable_wrapCallback=K,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(_s)),_s}var _o;function qb(){return _o||(_o=1,ws.exports=bd()),ws.exports}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pe(){return Pe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pe.apply(this,arguments)}var Ve;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ve||(Ve={}));const So="popstate";function zb(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return tn("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:cn(s)}return _d(e,r,null,t)}function we(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wd(){return Math.random().toString(36).substr(2,8)}function To(t,e){return{usr:t.state,key:t.key,idx:e}}function tn(t,e,r,n){return r===void 0&&(r=null),Pe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zt(e):e,{state:r,key:e&&e.key||n||wd()})}function cn(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Zt(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function _d(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=Ve.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Pe({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ve.Pop;let m=u(),S=m==null?null:m-c;c=m,l&&l({action:a,location:p.location,delta:S})}function h(m,S){a=Ve.Push;let v=tn(p.location,m,S);c=u()+1;let _=To(v,c),E=p.createHref(v);try{o.pushState(_,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(E)}i&&l&&l({action:a,location:p.location,delta:1})}function f(m,S){a=Ve.Replace;let v=tn(p.location,m,S);c=u();let _=To(v,c),E=p.createHref(v);o.replaceState(_,"",E),i&&l&&l({action:a,location:p.location,delta:0})}function g(m){let S=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof m=="string"?m:cn(m);return v=v.replace(/ $/,"%20"),we(S,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,S)}let p={get action(){return a},get location(){return t(s,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(So,d),l=m,()=>{s.removeEventListener(So,d),l=null}},createHref(m){return e(s,m)},createURL:g,encodeLocation(m){let S=g(m);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:h,replace:f,go(m){return o.go(m)}};return p}var me;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(me||(me={}));const Sd=new Set(["lazy","caseSensitive","path","id","index","children"]);function Td(t){return t.index===!0}function zn(t,e,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),t.map((s,i)=>{let o=[...r,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(we(s.index!==!0||!s.children,"Cannot specify children on an index route"),we(!n[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Td(s)){let l=Pe({},s,e(s),{id:a});return n[a]=l,l}else{let l=Pe({},s,e(s),{id:a,children:void 0});return n[a]=l,s.children&&(l.children=zn(s.children,e,o,n)),l}})}function yr(t,e,r){return r===void 0&&(r="/"),Nn(t,e,r,!1)}function Nn(t,e,r,n){let s=typeof e=="string"?Zt(e):e,i=is(s.pathname||"/",r);if(i==null)return null;let o=Dl(t);Pd(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Md(i);a=Dd(o[l],c,n)}return a}function Ed(t,e){let{route:r,pathname:n,params:s}=t;return{id:r.id,pathname:n,params:s,data:e[r.id],handle:r.handle}}function Dl(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(we(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Kr([n,l.relativePath]),u=r.concat(l);i.children&&i.children.length>0&&(we(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Dl(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:jd(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Ll(i.path))s(i,o,l)}),e}function Ll(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Ll(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Pd(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Id(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const xd=/^:[\w-]+$/,kd=3,Ad=2,Rd=1,Od=10,Cd=-2,Eo=t=>t==="*";function jd(t,e){let r=t.split("/"),n=r.length;return r.some(Eo)&&(n+=Cd),e&&(n+=Ad),r.filter(s=>!Eo(s)).reduce((s,i)=>s+(xd.test(i)?kd:i===""?Rd:Od),n)}function Id(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function Dd(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Po({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&r&&!n[n.length-1].route.index&&(d=Po({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Kr([i,d.pathname]),pathnameBase:Fd(Kr([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Kr([i,d.pathnameBase]))}return o}function Po(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Ld(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let p=a[d]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[d];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Ld(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Pr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Md(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pr(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function is(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Vd(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Zt(t):t;return{pathname:r?r.startsWith("/")?r:$d(r,e):e,search:Nd(n),hash:Wd(s)}}function $d(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ss(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ml(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Ud(t,e){let r=Ml(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Bd(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Zt(t):(s=Pe({},t),we(!s.pathname||!s.pathname.includes("?"),Ss("?","pathname","search",s)),we(!s.pathname||!s.pathname.includes("#"),Ss("#","pathname","hash",s)),we(!s.search||!s.search.includes("#"),Ss("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let d=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=Vd(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Kr=t=>t.join("/").replace(/\/\/+/g,"/"),Fd=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nd=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wd=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ti{constructor(e,r,n,s){s===void 0&&(s=!1),this.status=e,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Hn(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Vl=["post","put","patch","delete"],qd=new Set(Vl),zd=["get",...Vl],Hd=new Set(zd),Kd=new Set([301,302,303,307,308]),Gd=new Set([307,308]),Ts={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Jd={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$r={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Di=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yd=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),$l="remix-router-transitions";function Hb(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!r;we(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let y=t.detectErrorBoundary;s=w=>({hasErrorBoundary:y(w)})}else s=Yd;let i={},o=zn(t.routes,s,void 0,i),a,l=t.basename||"/",c=t.dataStrategy||eh,u=t.patchRoutesOnNavigation,d=Pe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,g=null,p=null,m=null,S=t.hydrationData!=null,v=yr(o,t.history.location,l),_=!1,E=null;if(v==null&&!u){let y=He(404,{pathname:t.history.location.pathname}),{matches:w,route:T}=Mo(o);v=w,E={[T.id]:y}}v&&!t.hydrationData&&wn(v,o,t.history.location.pathname).active&&(v=null);let A;if(v)if(v.some(y=>y.route.lazy))A=!1;else if(!v.some(y=>y.route.loader))A=!0;else if(d.v7_partialHydration){let y=t.hydrationData?t.hydrationData.loaderData:null,w=t.hydrationData?t.hydrationData.errors:null;if(w){let T=v.findIndex(k=>w[k.route.id]!==void 0);A=v.slice(0,T+1).every(k=>!ni(k.route,y,w))}else A=v.every(T=>!ni(T.route,y,w))}else A=t.hydrationData!=null;else if(A=!1,v=[],d.v7_partialHydration){let y=wn(null,o,t.history.location.pathname);y.active&&y.matches&&(_=!0,v=y.matches)}let I,b={historyAction:t.history.action,location:t.history.location,matches:v,initialized:A,navigation:Ts,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||E,fetchers:new Map,blockers:new Map},R=Ve.Pop,j=!1,q,ge=!1,L=new Map,ee=null,ie=!1,ye=!1,te=[],Se=new Set,de=new Map,Ae=0,x=-1,P=new Map,F=new Set,U=new Map,G=new Map,Y=new Set,K=new Map,X=new Map,ne;function le(){if(h=t.history.listen(y=>{let{action:w,location:T,delta:k}=y;if(ne){ne(),ne=void 0;return}Pr(X.size===0||k!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let O=mo({currentLocation:b.location,nextLocation:T,historyAction:w});if(O&&k!=null){let W=new Promise(Q=>{ne=Q});t.history.go(k*-1),pt(O,{state:"blocked",location:T,proceed(){pt(O,{state:"proceeding",proceed:void 0,reset:void 0,location:T}),W.then(()=>t.history.go(k))},reset(){let Q=new Map(b.blockers);Q.set(O,$r),ue({blockers:Q})}});return}return rt(w,T)}),r){ph(e,L);let y=()=>gh(e,L);e.addEventListener("pagehide",y),ee=()=>e.removeEventListener("pagehide",y)}return b.initialized||rt(Ve.Pop,b.location,{initialHydration:!0}),I}function se(){h&&h(),ee&&ee(),f.clear(),q&&q.abort(),b.fetchers.forEach((y,w)=>z(w)),b.blockers.forEach((y,w)=>Be(w))}function Ee(y){return f.add(y),()=>f.delete(y)}function ue(y,w){w===void 0&&(w={}),b=Pe({},b,y);let T=[],k=[];d.v7_fetcherPersist&&b.fetchers.forEach((O,W)=>{O.state==="idle"&&(Y.has(W)?k.push(W):T.push(W))}),Y.forEach(O=>{!b.fetchers.has(O)&&!de.has(O)&&k.push(O)}),[...f].forEach(O=>O(b,{deletedFetchers:k,viewTransitionOpts:w.viewTransitionOpts,flushSync:w.flushSync===!0})),d.v7_fetcherPersist?(T.forEach(O=>b.fetchers.delete(O)),k.forEach(O=>z(O))):k.forEach(O=>Y.delete(O))}function $e(y,w,T){var k,O;let{flushSync:W}=T===void 0?{}:T,Q=b.actionData!=null&&b.navigation.formMethod!=null&&at(b.navigation.formMethod)&&b.navigation.state==="loading"&&((k=y.state)==null?void 0:k._isRedirect)!==!0,V;w.actionData?Object.keys(w.actionData).length>0?V=w.actionData:V=null:Q?V=b.actionData:V=null;let B=w.loaderData?Do(b.loaderData,w.loaderData,w.matches||[],w.errors):b.loaderData,M=b.blockers;M.size>0&&(M=new Map(M),M.forEach((ce,Fe)=>M.set(Fe,$r)));let N=j===!0||b.navigation.formMethod!=null&&at(b.navigation.formMethod)&&((O=y.state)==null?void 0:O._isRedirect)!==!0;a&&(o=a,a=void 0),ie||R===Ve.Pop||(R===Ve.Push?t.history.push(y,y.state):R===Ve.Replace&&t.history.replace(y,y.state));let re;if(R===Ve.Pop){let ce=L.get(b.location.pathname);ce&&ce.has(y.pathname)?re={currentLocation:b.location,nextLocation:y}:L.has(y.pathname)&&(re={currentLocation:y,nextLocation:b.location})}else if(ge){let ce=L.get(b.location.pathname);ce?ce.add(y.pathname):(ce=new Set([y.pathname]),L.set(b.location.pathname,ce)),re={currentLocation:b.location,nextLocation:y}}ue(Pe({},w,{actionData:V,loaderData:B,historyAction:R,location:y,initialized:!0,navigation:Ts,revalidation:"idle",restoreScrollPosition:vo(y,w.matches||b.matches),preventScrollReset:N,blockers:M}),{viewTransitionOpts:re,flushSync:W===!0}),R=Ve.Pop,j=!1,ge=!1,ie=!1,ye=!1,te=[]}async function Mt(y,w){if(typeof y=="number"){t.history.go(y);return}let T=ri(b.location,b.matches,l,d.v7_prependBasename,y,d.v7_relativeSplatPath,w?.fromRouteId,w?.relative),{path:k,submission:O,error:W}=xo(d.v7_normalizeFormMethod,!1,T,w),Q=b.location,V=tn(b.location,k,w&&w.state);V=Pe({},V,t.history.encodeLocation(V));let B=w&&w.replace!=null?w.replace:void 0,M=Ve.Push;B===!0?M=Ve.Replace:B===!1||O!=null&&at(O.formMethod)&&O.formAction===b.location.pathname+b.location.search&&(M=Ve.Replace);let N=w&&"preventScrollReset"in w?w.preventScrollReset===!0:void 0,re=(w&&w.flushSync)===!0,ce=mo({currentLocation:Q,nextLocation:V,historyAction:M});if(ce){pt(ce,{state:"blocked",location:V,proceed(){pt(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),Mt(y,w)},reset(){let Fe=new Map(b.blockers);Fe.set(ce,$r),ue({blockers:Fe})}});return}return await rt(M,V,{submission:O,pendingError:W,preventScrollReset:N,replace:w&&w.replace,enableViewTransition:w&&w.viewTransition,flushSync:re})}function Ir(){if(or(),ue({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){rt(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}rt(R||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:ge===!0})}}async function rt(y,w,T){q&&q.abort(),q=null,R=y,ie=(T&&T.startUninterruptedRevalidation)===!0,gd(b.location,b.matches),j=(T&&T.preventScrollReset)===!0,ge=(T&&T.enableViewTransition)===!0;let k=a||o,O=T&&T.overrideNavigation,W=T!=null&&T.initialHydration&&b.matches&&b.matches.length>0&&!_?b.matches:yr(k,w,l),Q=(T&&T.flushSync)===!0;if(W&&b.initialized&&!ye&&oh(b.location,w)&&!(T&&T.submission&&at(T.submission.formMethod))){$e(w,{matches:W},{flushSync:Q});return}let V=wn(W,k,w.pathname);if(V.active&&V.matches&&(W=V.matches),!W){let{error:ve,notFoundMatches:pe,route:Re}=ys(w.pathname);$e(w,{matches:pe,loaderData:{},errors:{[Re.id]:ve}},{flushSync:Q});return}q=new AbortController;let B=ur(t.history,w,q.signal,T&&T.submission),M;if(T&&T.pendingError)M=[Ht(W).route.id,{type:me.error,error:T.pendingError}];else if(T&&T.submission&&at(T.submission.formMethod)){let ve=await mn(B,w,T.submission,W,V.active,{replace:T.replace,flushSync:Q});if(ve.shortCircuited)return;if(ve.pendingActionResult){let[pe,Re]=ve.pendingActionResult;if(Je(Re)&&Hn(Re.error)&&Re.error.status===404){q=null,$e(w,{matches:ve.matches,loaderData:{},errors:{[pe]:Re.error}});return}}W=ve.matches||W,M=ve.pendingActionResult,O=Es(w,T.submission),Q=!1,V.active=!1,B=ur(t.history,B.url,B.signal)}let{shortCircuited:N,matches:re,loaderData:ce,errors:Fe}=await yn(B,w,W,V.active,O,T&&T.submission,T&&T.fetcherSubmission,T&&T.replace,T&&T.initialHydration===!0,Q,M);N||(q=null,$e(w,Pe({matches:re||W},Lo(M),{loaderData:ce,errors:Fe})))}async function mn(y,w,T,k,O,W){W===void 0&&(W={}),or();let Q=hh(w,T);if(ue({navigation:Q},{flushSync:W.flushSync===!0}),O){let M=await _n(k,w.pathname,y.signal);if(M.type==="aborted")return{shortCircuited:!0};if(M.type==="error"){let N=Ht(M.partialMatches).route.id;return{matches:M.partialMatches,pendingActionResult:[N,{type:me.error,error:M.error}]}}else if(M.matches)k=M.matches;else{let{notFoundMatches:N,error:re,route:ce}=ys(w.pathname);return{matches:N,pendingActionResult:[ce.id,{type:me.error,error:re}]}}}let V,B=qr(k,w);if(!B.route.action&&!B.route.lazy)V={type:me.error,error:He(405,{method:y.method,pathname:w.pathname,routeId:B.route.id})};else if(V=(await ft("action",b,y,[B],k,null))[B.route.id],y.signal.aborted)return{shortCircuited:!0};if(Jt(V)){let M;return W&&W.replace!=null?M=W.replace:M=Co(V.response.headers.get("Location"),new URL(y.url),l)===b.location.pathname+b.location.search,await ht(y,V,!0,{submission:T,replace:M}),{shortCircuited:!0}}if(Rt(V))throw He(400,{type:"defer-action"});if(Je(V)){let M=Ht(k,B.route.id);return(W&&W.replace)!==!0&&(R=Ve.Push),{matches:k,pendingActionResult:[M.route.id,V]}}return{matches:k,pendingActionResult:[B.route.id,V]}}async function yn(y,w,T,k,O,W,Q,V,B,M,N){let re=O||Es(w,W),ce=W||Q||$o(re),Fe=!ie&&(!d.v7_partialHydration||!B);if(k){if(Fe){let Oe=vn(N);ue(Pe({navigation:re},Oe!==void 0?{actionData:Oe}:{}),{flushSync:M})}let fe=await _n(T,w.pathname,y.signal);if(fe.type==="aborted")return{shortCircuited:!0};if(fe.type==="error"){let Oe=Ht(fe.partialMatches).route.id;return{matches:fe.partialMatches,loaderData:{},errors:{[Oe]:fe.error}}}else if(fe.matches)T=fe.matches;else{let{error:Oe,notFoundMatches:lr,route:Vr}=ys(w.pathname);return{matches:lr,loaderData:{},errors:{[Vr.id]:Oe}}}}let ve=a||o,[pe,Re]=Ao(t.history,b,T,ce,w,d.v7_partialHydration&&B===!0,d.v7_skipActionErrorRevalidation,ye,te,Se,Y,U,F,ve,l,N);if(vs(fe=>!(T&&T.some(Oe=>Oe.route.id===fe))||pe&&pe.some(Oe=>Oe.route.id===fe)),x=++Ae,pe.length===0&&Re.length===0){let fe=ze();return $e(w,Pe({matches:T,loaderData:{},errors:N&&Je(N[1])?{[N[0]]:N[1].error}:null},Lo(N),fe?{fetchers:new Map(b.fetchers)}:{}),{flushSync:M}),{shortCircuited:!0}}if(Fe){let fe={};if(!k){fe.navigation=re;let Oe=vn(N);Oe!==void 0&&(fe.actionData=Oe)}Re.length>0&&(fe.fetchers=ms(Re)),ue(fe,{flushSync:M})}Re.forEach(fe=>{he(fe.key),fe.controller&&de.set(fe.key,fe.controller)});let ar=()=>Re.forEach(fe=>he(fe.key));q&&q.signal.addEventListener("abort",ar);let{loaderResults:Lr,fetcherResults:gt}=await ir(b,T,pe,Re,y);if(y.signal.aborted)return{shortCircuited:!0};q&&q.signal.removeEventListener("abort",ar),Re.forEach(fe=>de.delete(fe.key));let ut=En(Lr);if(ut)return await ht(y,ut.result,!0,{replace:V}),{shortCircuited:!0};if(ut=En(gt),ut)return F.add(ut.key),await ht(y,ut.result,!0,{replace:V}),{shortCircuited:!0};let{loaderData:bs,errors:Mr}=Io(b,T,Lr,N,Re,gt,K);K.forEach((fe,Oe)=>{fe.subscribe(lr=>{(lr||fe.done)&&K.delete(Oe)})}),d.v7_partialHydration&&B&&b.errors&&(Mr=Pe({},b.errors,Mr));let $t=ze(),Sn=Ue(x),Tn=$t||Sn||Re.length>0;return Pe({matches:T,loaderData:bs,errors:Mr},Tn?{fetchers:new Map(b.fetchers)}:{})}function vn(y){if(y&&!Je(y[1]))return{[y[0]]:y[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function ms(y){return y.forEach(w=>{let T=b.fetchers.get(w.key),k=Ur(void 0,T?T.data:void 0);b.fetchers.set(w.key,k)}),new Map(b.fetchers)}function Dr(y,w,T,k){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");he(y);let O=(k&&k.flushSync)===!0,W=a||o,Q=ri(b.location,b.matches,l,d.v7_prependBasename,T,d.v7_relativeSplatPath,w,k?.relative),V=yr(W,Q,l),B=wn(V,W,Q);if(B.active&&B.matches&&(V=B.matches),!V){nt(y,w,He(404,{pathname:Q}),{flushSync:O});return}let{path:M,submission:N,error:re}=xo(d.v7_normalizeFormMethod,!0,Q,k);if(re){nt(y,w,re,{flushSync:O});return}let ce=qr(V,M),Fe=(k&&k.preventScrollReset)===!0;if(N&&at(N.formMethod)){Vt(y,w,M,ce,V,B.active,O,Fe,N);return}U.set(y,{routeId:w,path:M}),bn(y,w,M,ce,V,B.active,O,Fe,N)}async function Vt(y,w,T,k,O,W,Q,V,B){or(),U.delete(y);function M(Ie){if(!Ie.route.action&&!Ie.route.lazy){let cr=He(405,{method:B.formMethod,pathname:T,routeId:w});return nt(y,w,cr,{flushSync:Q}),!0}return!1}if(!W&&M(k))return;let N=b.fetchers.get(y);ct(y,fh(B,N),{flushSync:Q});let re=new AbortController,ce=ur(t.history,T,re.signal,B);if(W){let Ie=await _n(O,new URL(ce.url).pathname,ce.signal,y);if(Ie.type==="aborted")return;if(Ie.type==="error"){nt(y,w,Ie.error,{flushSync:Q});return}else if(Ie.matches){if(O=Ie.matches,k=qr(O,T),M(k))return}else{nt(y,w,He(404,{pathname:T}),{flushSync:Q});return}}de.set(y,re);let Fe=Ae,pe=(await ft("action",b,ce,[k],O,y))[k.route.id];if(ce.signal.aborted){de.get(y)===re&&de.delete(y);return}if(d.v7_fetcherPersist&&Y.has(y)){if(Jt(pe)||Je(pe)){ct(y,Et(void 0));return}}else{if(Jt(pe))if(de.delete(y),x>Fe){ct(y,Et(void 0));return}else return F.add(y),ct(y,Ur(B)),ht(ce,pe,!1,{fetcherSubmission:B,preventScrollReset:V});if(Je(pe)){nt(y,w,pe.error);return}}if(Rt(pe))throw He(400,{type:"defer-action"});let Re=b.navigation.location||b.location,ar=ur(t.history,Re,re.signal),Lr=a||o,gt=b.navigation.state!=="idle"?yr(Lr,b.navigation.location,l):b.matches;we(gt,"Didn't find any matches after fetcher action");let ut=++Ae;P.set(y,ut);let bs=Ur(B,pe.data);b.fetchers.set(y,bs);let[Mr,$t]=Ao(t.history,b,gt,B,Re,!1,d.v7_skipActionErrorRevalidation,ye,te,Se,Y,U,F,Lr,l,[k.route.id,pe]);$t.filter(Ie=>Ie.key!==y).forEach(Ie=>{let cr=Ie.key,bo=b.fetchers.get(cr),vd=Ur(void 0,bo?bo.data:void 0);b.fetchers.set(cr,vd),he(cr),Ie.controller&&de.set(cr,Ie.controller)}),ue({fetchers:new Map(b.fetchers)});let Sn=()=>$t.forEach(Ie=>he(Ie.key));re.signal.addEventListener("abort",Sn);let{loaderResults:Tn,fetcherResults:fe}=await ir(b,gt,Mr,$t,ar);if(re.signal.aborted)return;re.signal.removeEventListener("abort",Sn),P.delete(y),de.delete(y),$t.forEach(Ie=>de.delete(Ie.key));let Oe=En(Tn);if(Oe)return ht(ar,Oe.result,!1,{preventScrollReset:V});if(Oe=En(fe),Oe)return F.add(Oe.key),ht(ar,Oe.result,!1,{preventScrollReset:V});let{loaderData:lr,errors:Vr}=Io(b,gt,Tn,void 0,$t,fe,K);if(b.fetchers.has(y)){let Ie=Et(pe.data);b.fetchers.set(y,Ie)}Ue(ut),b.navigation.state==="loading"&&ut>x?(we(R,"Expected pending action"),q&&q.abort(),$e(b.navigation.location,{matches:gt,loaderData:lr,errors:Vr,fetchers:new Map(b.fetchers)})):(ue({errors:Vr,loaderData:Do(b.loaderData,lr,gt,Vr),fetchers:new Map(b.fetchers)}),ye=!1)}async function bn(y,w,T,k,O,W,Q,V,B){let M=b.fetchers.get(y);ct(y,Ur(B,M?M.data:void 0),{flushSync:Q});let N=new AbortController,re=ur(t.history,T,N.signal);if(W){let pe=await _n(O,new URL(re.url).pathname,re.signal,y);if(pe.type==="aborted")return;if(pe.type==="error"){nt(y,w,pe.error,{flushSync:Q});return}else if(pe.matches)O=pe.matches,k=qr(O,T);else{nt(y,w,He(404,{pathname:T}),{flushSync:Q});return}}de.set(y,N);let ce=Ae,ve=(await ft("loader",b,re,[k],O,y))[k.route.id];if(Rt(ve)&&(ve=await Li(ve,re.signal,!0)||ve),de.get(y)===N&&de.delete(y),!re.signal.aborted){if(Y.has(y)){ct(y,Et(void 0));return}if(Jt(ve))if(x>ce){ct(y,Et(void 0));return}else{F.add(y),await ht(re,ve,!1,{preventScrollReset:V});return}if(Je(ve)){nt(y,w,ve.error);return}we(!Rt(ve),"Unhandled fetcher deferred data"),ct(y,Et(ve.data))}}async function ht(y,w,T,k){let{submission:O,fetcherSubmission:W,preventScrollReset:Q,replace:V}=k===void 0?{}:k;w.response.headers.has("X-Remix-Revalidate")&&(ye=!0);let B=w.response.headers.get("Location");we(B,"Expected a Location header on the redirect Response"),B=Co(B,new URL(y.url),l);let M=tn(b.location,B,{_isRedirect:!0});if(r){let pe=!1;if(w.response.headers.has("X-Remix-Reload-Document"))pe=!0;else if(Di.test(B)){const Re=t.history.createURL(B);pe=Re.origin!==e.location.origin||is(Re.pathname,l)==null}if(pe){V?e.location.replace(B):e.location.assign(B);return}}q=null;let N=V===!0||w.response.headers.has("X-Remix-Replace")?Ve.Replace:Ve.Push,{formMethod:re,formAction:ce,formEncType:Fe}=b.navigation;!O&&!W&&re&&ce&&Fe&&(O=$o(b.navigation));let ve=O||W;if(Gd.has(w.response.status)&&ve&&at(ve.formMethod))await rt(N,M,{submission:Pe({},ve,{formAction:B}),preventScrollReset:Q||j,enableViewTransition:T?ge:void 0});else{let pe=Es(M,O);await rt(N,M,{overrideNavigation:pe,fetcherSubmission:W,preventScrollReset:Q||j,enableViewTransition:T?ge:void 0})}}async function ft(y,w,T,k,O,W){let Q,V={};try{Q=await th(c,y,w,T,k,O,W,i,s)}catch(B){return k.forEach(M=>{V[M.route.id]={type:me.error,error:B}}),V}for(let[B,M]of Object.entries(Q))if(ah(M)){let N=M.result;V[B]={type:me.redirect,response:sh(N,T,B,O,l,d.v7_relativeSplatPath)}}else V[B]=await nh(M);return V}async function ir(y,w,T,k,O){let W=y.matches,Q=ft("loader",y,O,T,w,null),V=Promise.all(k.map(async N=>{if(N.matches&&N.match&&N.controller){let ce=(await ft("loader",y,ur(t.history,N.path,N.controller.signal),[N.match],N.matches,N.key))[N.match.route.id];return{[N.key]:ce}}else return Promise.resolve({[N.key]:{type:me.error,error:He(404,{pathname:N.path})}})})),B=await Q,M=(await V).reduce((N,re)=>Object.assign(N,re),{});return await Promise.all([uh(w,B,O.signal,W,y.loaderData),dh(w,M,k)]),{loaderResults:B,fetcherResults:M}}function or(){ye=!0,te.push(...vs()),U.forEach((y,w)=>{de.has(w)&&Se.add(w),he(w)})}function ct(y,w,T){T===void 0&&(T={}),b.fetchers.set(y,w),ue({fetchers:new Map(b.fetchers)},{flushSync:(T&&T.flushSync)===!0})}function nt(y,w,T,k){k===void 0&&(k={});let O=Ht(b.matches,w);z(y),ue({errors:{[O.route.id]:T},fetchers:new Map(b.fetchers)},{flushSync:(k&&k.flushSync)===!0})}function D(y){return G.set(y,(G.get(y)||0)+1),Y.has(y)&&Y.delete(y),b.fetchers.get(y)||Jd}function z(y){let w=b.fetchers.get(y);de.has(y)&&!(w&&w.state==="loading"&&P.has(y))&&he(y),U.delete(y),P.delete(y),F.delete(y),d.v7_fetcherPersist&&Y.delete(y),Se.delete(y),b.fetchers.delete(y)}function oe(y){let w=(G.get(y)||0)-1;w<=0?(G.delete(y),Y.add(y),d.v7_fetcherPersist||z(y)):G.set(y,w),ue({fetchers:new Map(b.fetchers)})}function he(y){let w=de.get(y);w&&(w.abort(),de.delete(y))}function je(y){for(let w of y){let T=D(w),k=Et(T.data);b.fetchers.set(w,k)}}function ze(){let y=[],w=!1;for(let T of F){let k=b.fetchers.get(T);we(k,"Expected fetcher: "+T),k.state==="loading"&&(F.delete(T),y.push(T),w=!0)}return je(y),w}function Ue(y){let w=[];for(let[T,k]of P)if(k<y){let O=b.fetchers.get(T);we(O,"Expected fetcher: "+T),O.state==="loading"&&(he(T),P.delete(T),w.push(T))}return je(w),w.length>0}function _t(y,w){let T=b.blockers.get(y)||$r;return X.get(y)!==w&&X.set(y,w),T}function Be(y){b.blockers.delete(y),X.delete(y)}function pt(y,w){let T=b.blockers.get(y)||$r;we(T.state==="unblocked"&&w.state==="blocked"||T.state==="blocked"&&w.state==="blocked"||T.state==="blocked"&&w.state==="proceeding"||T.state==="blocked"&&w.state==="unblocked"||T.state==="proceeding"&&w.state==="unblocked","Invalid blocker state transition: "+T.state+" -> "+w.state);let k=new Map(b.blockers);k.set(y,w),ue({blockers:k})}function mo(y){let{currentLocation:w,nextLocation:T,historyAction:k}=y;if(X.size===0)return;X.size>1&&Pr(!1,"A router only supports one blocker at a time");let O=Array.from(X.entries()),[W,Q]=O[O.length-1],V=b.blockers.get(W);if(!(V&&V.state==="proceeding")&&Q({currentLocation:w,nextLocation:T,historyAction:k}))return W}function ys(y){let w=He(404,{pathname:y}),T=a||o,{matches:k,route:O}=Mo(T);return vs(),{notFoundMatches:k,route:O,error:w}}function vs(y){let w=[];return K.forEach((T,k)=>{(!y||y(k))&&(T.cancel(),w.push(k),K.delete(k))}),w}function pd(y,w,T){if(g=y,m=w,p=T||null,!S&&b.navigation===Ts){S=!0;let k=vo(b.location,b.matches);k!=null&&ue({restoreScrollPosition:k})}return()=>{g=null,m=null,p=null}}function yo(y,w){return p&&p(y,w.map(k=>Ed(k,b.loaderData)))||y.key}function gd(y,w){if(g&&m){let T=yo(y,w);g[T]=m()}}function vo(y,w){if(g){let T=yo(y,w),k=g[T];if(typeof k=="number")return k}return null}function wn(y,w,T){if(u)if(y){if(Object.keys(y[0].params).length>0)return{active:!0,matches:Nn(w,T,l,!0)}}else return{active:!0,matches:Nn(w,T,l,!0)||[]};return{active:!1,matches:null}}async function _n(y,w,T,k){if(!u)return{type:"success",matches:y};let O=y;for(;;){let W=a==null,Q=a||o,V=i;try{await u({signal:T,path:w,matches:O,fetcherKey:k,patch:(N,re)=>{T.aborted||Oo(N,re,Q,V,s)}})}catch(N){return{type:"error",error:N,partialMatches:O}}finally{W&&!T.aborted&&(o=[...o])}if(T.aborted)return{type:"aborted"};let B=yr(Q,w,l);if(B)return{type:"success",matches:B};let M=Nn(Q,w,l,!0);if(!M||O.length===M.length&&O.every((N,re)=>N.route.id===M[re].route.id))return{type:"success",matches:null};O=M}}function md(y){i={},a=zn(y,s,void 0,i)}function yd(y,w){let T=a==null;Oo(y,w,a||o,i,s),T&&(o=[...o],ue({}))}return I={get basename(){return l},get future(){return d},get state(){return b},get routes(){return o},get window(){return e},initialize:le,subscribe:Ee,enableScrollRestoration:pd,navigate:Mt,fetch:Dr,revalidate:Ir,createHref:y=>t.history.createHref(y),encodeLocation:y=>t.history.encodeLocation(y),getFetcher:D,deleteFetcher:oe,dispose:se,getBlocker:_t,deleteBlocker:Be,patchRoutes:yd,_internalFetchControllers:de,_internalActiveDeferreds:K,_internalSetRoutes:md},I}function Xd(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ri(t,e,r,n,s,i,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=Bd(s||".",Ud(l,i),is(t.pathname,r)||t.pathname,a==="path");if(s==null&&(u.search=t.search,u.hash=t.hash),(s==null||s===""||s===".")&&c){let d=Mi(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let h=new URLSearchParams(u.search),f=h.getAll("index");h.delete("index"),f.filter(p=>p).forEach(p=>h.append("index",p));let g=h.toString();u.search=g?"?"+g:""}}return n&&r!=="/"&&(u.pathname=u.pathname==="/"?r:Kr([r,u.pathname])),cn(u)}function xo(t,e,r,n){if(!n||!Xd(n))return{path:r};if(n.formMethod&&!ch(n.formMethod))return{path:r,error:He(405,{method:n.formMethod})};let s=()=>({path:r,error:He(400,{type:"invalid-body"})}),i=n.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=Fl(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!at(o))return s();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,g)=>{let[p,m]=g;return""+f+p+"="+m+`
`},""):String(n.body);return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!at(o))return s();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}we(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=si(n.formData),c=n.formData;else if(n.body instanceof FormData)l=si(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=jo(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=jo(l)}catch{return s()}let u={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(at(u.formMethod))return{path:r,submission:u};let d=Zt(r);return e&&d.search&&Mi(d.search)&&l.append("index",""),d.search="?"+l,{path:cn(d),submission:u}}function ko(t,e,r){r===void 0&&(r=!1);let n=t.findIndex(s=>s.route.id===e);return n>=0?t.slice(0,r?n+1:n):t}function Ao(t,e,r,n,s,i,o,a,l,c,u,d,h,f,g,p){let m=p?Je(p[1])?p[1].error:p[1].data:void 0,S=t.createURL(e.location),v=t.createURL(s),_=r;i&&e.errors?_=ko(r,Object.keys(e.errors)[0],!0):p&&Je(p[1])&&(_=ko(r,p[0]));let E=p?p[1].statusCode:void 0,A=o&&E&&E>=400,I=_.filter((R,j)=>{let{route:q}=R;if(q.lazy)return!0;if(q.loader==null)return!1;if(i)return ni(q,e.loaderData,e.errors);if(Qd(e.loaderData,e.matches[j],R)||l.some(ee=>ee===R.route.id))return!0;let ge=e.matches[j],L=R;return Ro(R,Pe({currentUrl:S,currentParams:ge.params,nextUrl:v,nextParams:L.params},n,{actionResult:m,actionStatus:E,defaultShouldRevalidate:A?!1:a||S.pathname+S.search===v.pathname+v.search||S.search!==v.search||Ul(ge,L)}))}),b=[];return d.forEach((R,j)=>{if(i||!r.some(ie=>ie.route.id===R.routeId)||u.has(j))return;let q=yr(f,R.path,g);if(!q){b.push({key:j,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let ge=e.fetchers.get(j),L=qr(q,R.path),ee=!1;h.has(j)?ee=!1:c.has(j)?(c.delete(j),ee=!0):ge&&ge.state!=="idle"&&ge.data===void 0?ee=a:ee=Ro(L,Pe({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:r[r.length-1].params},n,{actionResult:m,actionStatus:E,defaultShouldRevalidate:A?!1:a})),ee&&b.push({key:j,routeId:R.routeId,path:R.path,matches:q,match:L,controller:new AbortController})}),[I,b]}function ni(t,e,r){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,s=r!=null&&r[t.id]!==void 0;return!n&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!s}function Qd(t,e,r){let n=!e||r.route.id!==e.route.id,s=t[r.route.id]===void 0;return n||s}function Ul(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function Ro(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function Oo(t,e,r,n,s){var i;let o;if(t){let c=n[t];we(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=r;let a=e.filter(c=>!o.some(u=>Bl(c,u))),l=zn(a,s,[t||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],n);o.push(...l)}function Bl(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>{var s;return(s=e.children)==null?void 0:s.some(i=>Bl(r,i))}):!1}async function Zd(t,e,r){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let s=r[t.id];we(s,"No route found in manifest");let i={};for(let o in n){let l=s[o]!==void 0&&o!=="hasErrorBoundary";Pr(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Sd.has(o)&&(i[o]=n[o])}Object.assign(s,i),Object.assign(s,Pe({},e(s),{lazy:void 0}))}async function eh(t){let{matches:e}=t,r=e.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,i,o)=>Object.assign(s,{[r[o].route.id]:i}),{})}async function th(t,e,r,n,s,i,o,a,l,c){let u=i.map(f=>f.route.lazy?Zd(f.route,l,a):void 0),d=i.map((f,g)=>{let p=u[g],m=s.some(v=>v.route.id===f.route.id);return Pe({},f,{shouldLoad:m,resolve:async v=>(v&&n.method==="GET"&&(f.route.lazy||f.route.loader)&&(m=!0),m?rh(e,n,f,p,v,c):Promise.resolve({type:me.data,result:void 0}))})}),h=await t({matches:d,request:n,params:i[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return h}async function rh(t,e,r,n,s,i){let o,a,l=c=>{let u,d=new Promise((g,p)=>u=p);a=()=>u(),e.signal.addEventListener("abort",a);let h=g=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):c({request:e,params:r.params,context:i},...g!==void 0?[g]:[]),f=(async()=>{try{return{type:"data",result:await(s?s(p=>h(p)):h())}}catch(g){return{type:"error",result:g}}})();return Promise.race([f,d])};try{let c=r.route[t];if(n)if(c){let u,[d]=await Promise.all([l(c).catch(h=>{u=h}),n]);if(u!==void 0)throw u;o=d}else if(await n,c=r.route[t],c)o=await l(c);else if(t==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw He(405,{method:e.method,pathname:d,routeId:r.route.id})}else return{type:me.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),d=u.pathname+u.search;throw He(404,{pathname:d})}we(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:me.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function nh(t){let{result:e,type:r}=t;if(Nl(e)){let d;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(h){return{type:me.error,error:h}}return r===me.error?{type:me.error,error:new ti(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:me.data,data:d,statusCode:e.status,headers:e.headers}}if(r===me.error){if(Vo(e)){var n,s;if(e.data instanceof Error){var i,o;return{type:me.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:me.error,error:new ti(((n=e.init)==null?void 0:n.status)||500,void 0,e.data),statusCode:Hn(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:me.error,error:e,statusCode:Hn(e)?e.status:void 0}}if(lh(e)){var a,l;return{type:me.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Vo(e)){var c,u;return{type:me.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:me.data,data:e}}function sh(t,e,r,n,s,i){let o=t.headers.get("Location");if(we(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Di.test(o)){let a=n.slice(0,n.findIndex(l=>l.route.id===r)+1);o=ri(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function Co(t,e,r){if(Di.test(t)){let n=t,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),i=is(s.pathname,r)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function ur(t,e,r,n){let s=t.createURL(Fl(e)).toString(),i={signal:r};if(n&&at(n.formMethod)){let{formMethod:o,formEncType:a}=n;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(n.json)):a==="text/plain"?i.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?i.body=si(n.formData):i.body=n.formData}return new Request(s,i)}function si(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function jo(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function ih(t,e,r,n,s){let i={},o=null,a,l=!1,c={},u=r&&Je(r[1])?r[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let h=d.route.id,f=e[h];if(we(!Jt(f),"Cannot handle redirect results in processLoaderData"),Je(f)){let g=f.error;u!==void 0&&(g=u,u=void 0),o=o||{};{let p=Ht(t,h);o[p.route.id]==null&&(o[p.route.id]=g)}i[h]=void 0,l||(l=!0,a=Hn(f.error)?f.error.status:500),f.headers&&(c[h]=f.headers)}else Rt(f)?(n.set(h,f.deferredData),i[h]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(a=f.statusCode),f.headers&&(c[h]=f.headers)):(i[h]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(a=f.statusCode),f.headers&&(c[h]=f.headers))}),u!==void 0&&r&&(o={[r[0]]:u},i[r[0]]=void 0),{loaderData:i,errors:o,statusCode:a||200,loaderHeaders:c}}function Io(t,e,r,n,s,i,o){let{loaderData:a,errors:l}=ih(e,r,n,o);return s.forEach(c=>{let{key:u,match:d,controller:h}=c,f=i[u];if(we(f,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(Je(f)){let g=Ht(t.matches,d?.route.id);l&&l[g.route.id]||(l=Pe({},l,{[g.route.id]:f.error})),t.fetchers.delete(u)}else if(Jt(f))we(!1,"Unhandled fetcher revalidation redirect");else if(Rt(f))we(!1,"Unhandled fetcher deferred data");else{let g=Et(f.data);t.fetchers.set(u,g)}}),{loaderData:a,errors:l}}function Do(t,e,r,n){let s=Pe({},e);for(let i of r){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),n&&n.hasOwnProperty(o))break}return s}function Lo(t){return t?Je(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ht(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function Mo(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function He(t,e){let{pathname:r,routeId:n,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s&&r&&n?l="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):t===404?(a="Not Found",l='No route matches URL "'+r+'"'):t===405&&(a="Method Not Allowed",s&&r&&n?l="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new ti(t||500,a,new Error(l),!0)}function En(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,s]=e[r];if(Jt(s))return{key:n,result:s}}}function Fl(t){let e=typeof t=="string"?Zt(t):t;return cn(Pe({},e,{hash:""}))}function oh(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function ah(t){return Nl(t.result)&&Kd.has(t.result.status)}function Rt(t){return t.type===me.deferred}function Je(t){return t.type===me.error}function Jt(t){return(t&&t.type)===me.redirect}function Vo(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function lh(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Nl(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ch(t){return Hd.has(t.toLowerCase())}function at(t){return qd.has(t.toLowerCase())}async function uh(t,e,r,n,s){let i=Object.entries(e);for(let o=0;o<i.length;o++){let[a,l]=i[o],c=t.find(h=>h?.route.id===a);if(!c)continue;let u=n.find(h=>h.route.id===c.route.id),d=u!=null&&!Ul(u,c)&&(s&&s[c.route.id])!==void 0;Rt(l)&&d&&await Li(l,r,!1).then(h=>{h&&(e[a]=h)})}}async function dh(t,e,r){for(let n=0;n<r.length;n++){let{key:s,routeId:i,controller:o}=r[n],a=e[s];t.find(c=>c?.route.id===i)&&Rt(a)&&(we(o,"Expected an AbortController for revalidating fetcher deferred result"),await Li(a,o.signal,!0).then(c=>{c&&(e[s]=c)}))}}async function Li(t,e,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(e)){if(r)try{return{type:me.data,data:t.deferredData.unwrappedData}}catch(s){return{type:me.error,error:s}}return{type:me.data,data:t.deferredData.data}}}function Mi(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function qr(t,e){let r=typeof e=="string"?Zt(e).search:e.search;if(t[t.length-1].route.index&&Mi(r||""))return t[t.length-1];let n=Ml(t);return n[n.length-1]}function $o(t){let{formMethod:e,formAction:r,formEncType:n,text:s,formData:i,json:o}=t;if(!(!e||!r||!n)){if(s!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:r,formEncType:n,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function Es(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function hh(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ur(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function fh(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Et(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ph(t,e){try{let r=t.sessionStorage.getItem($l);if(r){let n=JSON.parse(r);for(let[s,i]of Object.entries(n||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function gh(t,e){if(e.size>0){let r={};for(let[n,s]of e)r[n]=[...s];try{t.sessionStorage.setItem($l,JSON.stringify(r))}catch(n){Pr(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}function Kb(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t?.(s),r===!1||!s.defaultPrevented)return e?.(s)}}function Wl(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Wl(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function mh(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Wl(t))&&(n&&(n+=" "),n+=e);return n}const Uo=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Bo=mh,Gb=(t,e)=>r=>{var n;if(e?.variants==null)return Bo(t,r?.class,r?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=r?.[c],d=i?.[c];if(u===null)return null;const h=Uo(u)||Uo(d);return s[c][h]}),a=r&&Object.entries(r).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(g=>{let[p,m]=g;return Array.isArray(m)?m.includes({...i,...a}[p]):{...i,...a}[p]===m})?[...c,d,h]:c},[]);return Bo(t,o,l,r?.class,r?.className)};function yh(){for(var t=0,e,r,n="";t<arguments.length;)(e=arguments[t++])&&(r=ql(e))&&(n&&(n+=" "),n+=r);return n}function ql(t){if(typeof t=="string")return t;for(var e,r="",n=0;n<t.length;n++)t[n]&&(e=ql(t[n]))&&(r&&(r+=" "),r+=e);return r}var Vi="-";function vh(t){var e=wh(t),r=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,s=n===void 0?{}:n;function i(a){var l=a.split(Vi);return l[0]===""&&l.length!==1&&l.shift(),zl(l,e)||bh(a)}function o(a,l){var c=r[a]||[];return l&&s[a]?[].concat(c,s[a]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function zl(t,e){if(t.length===0)return e.classGroupId;var r=t[0],n=e.nextPart.get(r),s=n?zl(t.slice(1),n):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(Vi);return e.validators.find(function(o){var a=o.validator;return a(i)})?.classGroupId}}var Fo=/^\[(.+)\]$/;function bh(t){if(Fo.test(t)){var e=Fo.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function wh(t){var e=t.theme,r=t.prefix,n={nextPart:new Map,validators:[]},s=Sh(Object.entries(t.classGroups),r);return s.forEach(function(i){var o=i[0],a=i[1];ii(a,n,o,e)}),n}function ii(t,e,r,n){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:No(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(_h(s)){ii(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(o){var a=o[0],l=o[1];ii(l,No(e,a),r,n)})})}function No(t,e){var r=t;return e.split(Vi).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function _h(t){return t.isThemeGetter}function Sh(t,e){return e?t.map(function(r){var n=r[0],s=r[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[n,i]}):t}function Th(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,n=new Map;function s(i,o){r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)}return{get:function(o){var a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return s(o,a),a},set:function(o,a){r.has(o)?r.set(o,a):s(o,a)}}}var Hl="!";function Eh(t){var e=t.separator||":",r=e.length===1,n=e[0],s=e.length;return function(o){for(var a=[],l=0,c=0,u,d=0;d<o.length;d++){var h=o[d];if(l===0){if(h===n&&(r||o.slice(d,d+s)===e)){a.push(o.slice(c,d)),c=d+s;continue}if(h==="/"){u=d;continue}}h==="["?l++:h==="]"&&l--}var f=a.length===0?o:o.substring(c),g=f.startsWith(Hl),p=g?f.substring(1):f,m=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:m}}}function Ph(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(n){var s=n[0]==="[";s?(e.push.apply(e,r.sort().concat([n])),r=[]):r.push(n)}),e.push.apply(e,r.sort()),e}function xh(t){return{cache:Th(t.cacheSize),splitModifiers:Eh(t),...vh(t)}}var kh=/\s+/;function Ah(t,e){var r=e.splitModifiers,n=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(kh).map(function(o){var a=r(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,d=a.maybePostfixModifierPosition,h=n(d?u.substring(0,d):u),f=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:o};if(h=n(u),!h)return{isTailwindClass:!1,originalClassName:o};f=!1}var g=Ph(l).join(":"),p=c?g+Hl:g;return{isTailwindClass:!0,modifierId:p,classGroupId:h,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return i.has(u)?!1:(i.add(u),s(l,c).forEach(function(d){return i.add(a+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Rh(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,s,i,o=a;function a(c){var u=e[0],d=e.slice(1),h=d.reduce(function(f,g){return g(f)},u());return n=xh(h),s=n.cache.get,i=n.cache.set,o=l,l(c)}function l(c){var u=s(c);if(u)return u;var d=Ah(c,n);return i(c,d),d}return function(){return o(yh.apply(null,arguments))}}function Te(t){var e=function(n){return n[t]||[]};return e.isThemeGetter=!0,e}var Kl=/^\[(?:([a-z-]+):)?(.+)\]$/i,Oh=/^\d+\/\d+$/,Ch=new Set(["px","full","screen"]),jh=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ih=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Dh=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function st(t){return Yt(t)||Ch.has(t)||Oh.test(t)||oi(t)}function oi(t){return er(t,"length",Bh)}function Lh(t){return er(t,"size",Gl)}function Mh(t){return er(t,"position",Gl)}function Vh(t){return er(t,"url",Fh)}function Pn(t){return er(t,"number",Yt)}function Yt(t){return!Number.isNaN(Number(t))}function $h(t){return t.endsWith("%")&&Yt(t.slice(0,-1))}function Br(t){return Wo(t)||er(t,"number",Wo)}function ae(t){return Kl.test(t)}function Fr(){return!0}function St(t){return jh.test(t)}function Uh(t){return er(t,"",Nh)}function er(t,e,r){var n=Kl.exec(t);return n?n[1]?n[1]===e:r(n[2]):!1}function Bh(t){return Ih.test(t)}function Gl(){return!1}function Fh(t){return t.startsWith("url(")}function Wo(t){return Number.isInteger(Number(t))}function Nh(t){return Dh.test(t)}function Wh(){var t=Te("colors"),e=Te("spacing"),r=Te("blur"),n=Te("brightness"),s=Te("borderColor"),i=Te("borderRadius"),o=Te("borderSpacing"),a=Te("borderWidth"),l=Te("contrast"),c=Te("grayscale"),u=Te("hueRotate"),d=Te("invert"),h=Te("gap"),f=Te("gradientColorStops"),g=Te("gradientColorStopPositions"),p=Te("inset"),m=Te("margin"),S=Te("opacity"),v=Te("padding"),_=Te("saturate"),E=Te("scale"),A=Te("sepia"),I=Te("skew"),b=Te("space"),R=Te("translate"),j=function(){return["auto","contain","none"]},q=function(){return["auto","hidden","clip","visible","scroll"]},ge=function(){return["auto",ae,e]},L=function(){return[ae,e]},ee=function(){return["",st]},ie=function(){return["auto",Yt,ae]},ye=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},te=function(){return["solid","dashed","dotted","double","none"]},Se=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},de=function(){return["start","end","center","between","around","evenly","stretch"]},Ae=function(){return["","0",ae]},x=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},P=function(){return[Yt,Pn]},F=function(){return[Yt,ae]};return{cacheSize:500,theme:{colors:[Fr],spacing:[st],blur:["none","",St,ae],brightness:P(),borderColor:[t],borderRadius:["none","","full",St,ae],borderSpacing:L(),borderWidth:ee(),contrast:P(),grayscale:Ae(),hueRotate:F(),invert:Ae(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[$h,oi],inset:ge(),margin:ge(),opacity:P(),padding:L(),saturate:P(),scale:P(),sepia:Ae(),skew:F(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ae]}],container:["container"],columns:[{columns:[St]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ye(),[ae])}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Br]}],basis:[{basis:ge()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ae]}],grow:[{grow:Ae()}],shrink:[{shrink:Ae()}],order:[{order:["first","last","none",Br]}],"grid-cols":[{"grid-cols":[Fr]}],"col-start-end":[{col:["auto",{span:["full",Br]},ae]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Fr]}],"row-start-end":[{row:["auto",{span:[Br]},ae]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ae]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(de())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(de(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(de(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ae,e]}],"min-w":[{"min-w":["min","max","fit",ae,st]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[St]},St,ae]}],h:[{h:[ae,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ae,st]}],"max-h":[{"max-h":[ae,e,"min","max","fit"]}],"font-size":[{text:["base",St,oi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pn]}],"font-family":[{font:[Fr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ae]}],"line-clamp":[{"line-clamp":["none",Yt,Pn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ae,st]}],"list-image":[{"list-image":["none",ae]}],"list-style-type":[{list:["none","disc","decimal",ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(te(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",st]}],"underline-offset":[{"underline-offset":["auto",ae,st]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ye(),[Mh])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lh]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Vh]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[].concat(te(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:te()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(te())}],"outline-offset":[{"outline-offset":[ae,st]}],"outline-w":[{outline:[st]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[st]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",St,Uh]}],"shadow-color":[{shadow:[Fr]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":Se()}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",St,ae]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ae]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",ae]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Br,ae]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ae]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[st,Pn]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Jb=Rh(Wh),ai=function(t,e){return ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},ai(t,e)};function Jl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ai(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xr=function(){return xr=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xr.apply(this,arguments)};function tr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Yl(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function Xl(t,e){return function(r,n){e(r,n,t)}}function Ql(t,e,r,n,s,i){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,h=!1,f=r.length-1;f>=0;f--){var g={};for(var p in n)g[p]=p==="access"?{}:n[p];for(var p in n.access)g.access[p]=n.access[p];g.addInitializer=function(S){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(S||null))};var m=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(d=o(m.get))&&(u.get=d),(d=o(m.set))&&(u.set=d),(d=o(m.init))&&s.unshift(d)}else(d=o(m))&&(a==="field"?s.unshift(d):u[l]=d)}c&&Object.defineProperty(c,n.name,u),h=!0}function Zl(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function ec(t){return typeof t=="symbol"?t:"".concat(t)}function tc(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function rc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function $(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function nc(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var os=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});function sc(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&os(e,t,r)}function Kn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function ic(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($i(arguments[e]));return t}function oc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function ac(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function kr(t){return this instanceof kr?(this.v=t,this):new kr(t)}function lc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){n[f]&&(s[f]=function(p){return new Promise(function(m,S){i.push([f,p,m,S])>1||l(f,p)})},g&&(s[f]=g(s[f])))}function l(f,g){try{c(n[f](g))}catch(p){h(i[0][3],p)}}function c(f){f.value instanceof kr?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,g){f(g),i.shift(),i.length&&l(i[0][0],i[0][1])}}function cc(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:kr(t[s](o)),done:!1}:i?i(o):o}:i}}function uc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Kn=="function"?Kn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function dc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var qh=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},li=function(t){return li=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},li(t)};function hc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=li(t),n=0;n<r.length;n++)r[n]!=="default"&&os(e,t,r[n]);return qh(e,t),e}function fc(t){return t&&t.__esModule?t:{default:t}}function pc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function gc(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function mc(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function yc(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var zh=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function vc(t){function e(i){t.error=t.hasError?new zh(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function bc(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}const Hh={__extends:Jl,__assign:xr,__rest:tr,__decorate:Yl,__param:Xl,__esDecorate:Ql,__runInitializers:Zl,__propKey:ec,__setFunctionName:tc,__metadata:rc,__awaiter:$,__generator:nc,__createBinding:os,__exportStar:sc,__values:Kn,__read:$i,__spread:ic,__spreadArrays:oc,__spreadArray:ac,__await:kr,__asyncGenerator:lc,__asyncDelegator:cc,__asyncValues:uc,__makeTemplateObject:dc,__importStar:hc,__importDefault:fc,__classPrivateFieldGet:pc,__classPrivateFieldSet:gc,__classPrivateFieldIn:mc,__addDisposableResource:yc,__disposeResources:vc,__rewriteRelativeImportExtension:bc},Kh=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:yc,get __assign(){return xr},__asyncDelegator:cc,__asyncGenerator:lc,__asyncValues:uc,__await:kr,__awaiter:$,__classPrivateFieldGet:pc,__classPrivateFieldIn:mc,__classPrivateFieldSet:gc,__createBinding:os,__decorate:Yl,__disposeResources:vc,__esDecorate:Ql,__exportStar:sc,__extends:Jl,__generator:nc,__importDefault:fc,__importStar:hc,__makeTemplateObject:dc,__metadata:rc,__param:Xl,__propKey:ec,__read:$i,__rest:tr,__rewriteRelativeImportExtension:bc,__runInitializers:Zl,__setFunctionName:tc,__spread:ic,__spreadArray:ac,__spreadArrays:oc,__values:Kn,default:Hh},Symbol.toStringTag,{value:"Module"})),Gh="modulepreload",Jh=function(t){return"/"+t},qo={},Cr=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(r.map(c=>{if(c=Jh(c),c in qo)return;qo[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Gh,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Yh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(async()=>{const{default:n}=await Promise.resolve().then(()=>rr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Ui extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class zo extends Ui{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ho extends Ui{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ko extends Ui{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ci;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ci||(ci={}));class Xh{constructor(e,{headers:r={},customFetch:n,region:s=ci.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Yh(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:o,body:a,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${r}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(S=>{throw S.name==="AbortError"?S:new zo(S)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new Ho(f);if(!f.ok)throw new Ko(f);let p=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield f.json():p==="application/octet-stream"||p==="application/pdf"?m=yield f.blob():p==="text/event-stream"?m=f:p==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new zo(i)}:{data:null,error:i,response:i instanceof Ko||i instanceof Ho?i.context:void 0}}})}}var Ne={};const jr=Cl(Kh);var xn={},kn={},An={},Rn={},On={},Qh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ar=Qh();const Zh=Ar.fetch,wc=Ar.fetch.bind(Ar),_c=Ar.Headers,ef=Ar.Request,tf=Ar.Response,rr=Object.freeze(Object.defineProperty({__proto__:null,Headers:_c,Request:ef,Response:tf,default:wc,fetch:Zh},Symbol.toStringTag,{value:"Module"})),rf=Cl(rr);var Cn={},Go;function Sc(){if(Go)return Cn;Go=1,Object.defineProperty(Cn,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Cn.default=t,Cn}var Jo;function Tc(){if(Jo)return On;Jo=1,Object.defineProperty(On,"__esModule",{value:!0});const t=jr,e=t.__importDefault(rf),r=t.__importDefault(Sc());class n{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let g=null,p=null,m=null,S=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const I=await c.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?p=I:p=JSON.parse(I))}const E=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),A=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");E&&A&&A.length>1&&(m=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(g={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,S=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const E=await c.text();try{g=JSON.parse(E),Array.isArray(g)&&c.status===404&&(p=[],g=null,S=200,v="OK")}catch{c.status===404&&E===""?(S=204,v="No Content"):g={message:E}}if(g&&this.isMaybeSingle&&(!((f=g?.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,S=200,v="OK"),g&&this.shouldThrowOnError)throw new r.default(g)}return{error:g,data:p,count:m,status:S,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(d=c?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return On.default=n,On}var Yo;function Ec(){if(Yo)return Rn;Yo=1,Object.defineProperty(Rn,"__esModule",{value:!0});const e=jr.__importDefault(Tc());class r extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Rn.default=r,Rn}var Xo;function Bi(){if(Xo)return An;Xo=1,Object.defineProperty(An,"__esModule",{value:!0});const e=jr.__importDefault(Ec());class r extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${c}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return An.default=r,An}var Qo;function Pc(){if(Qo)return kn;Qo=1,Object.defineProperty(kn,"__esModule",{value:!0});const e=jr.__importDefault(Bi());class r{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return kn.default=r,kn}var Zo;function nf(){if(Zo)return xn;Zo=1,Object.defineProperty(xn,"__esModule",{value:!0});const t=jr,e=t.__importDefault(Pc()),r=t.__importDefault(Bi());class n{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const h=new URL(`${this.url}/rpc/${i}`);let f;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{h.searchParams.append(p,m)})):(d="POST",f=o);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new r.default({method:d,url:h,headers:g,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return xn.default=n,xn}var ea;function sf(){if(ea)return Ne;ea=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const t=jr,e=t.__importDefault(nf());Ne.PostgrestClient=e.default;const r=t.__importDefault(Pc());Ne.PostgrestQueryBuilder=r.default;const n=t.__importDefault(Bi());Ne.PostgrestFilterBuilder=n.default;const s=t.__importDefault(Ec());Ne.PostgrestTransformBuilder=s.default;const i=t.__importDefault(Tc());Ne.PostgrestBuilder=i.default;const o=t.__importDefault(Sc());return Ne.PostgrestError=o.default,Ne.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Ne}var of=sf();const af=Ii(of),{PostgrestClient:lf,PostgrestQueryBuilder:Yb,PostgrestFilterBuilder:Xb,PostgrestTransformBuilder:Qb,PostgrestBuilder:Zb,PostgrestError:ew}=af;class cf{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const uf="2.76.1",df=`realtime-js/${uf}`,hf="1.0.0",ui=1e4,ff=1e3,pf=100;var Gr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Gr||(Gr={}));var Me;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Me||(Me={}));var lt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(lt||(lt={}));var di;(function(t){t.websocket="websocket"})(di||(di={}));var Kt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Kt||(Kt={}));class gf{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class xc{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(be||(be={}));const ta=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=mf(o,t,e,s),i),{}):{}},mf=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s?.type,o=r[t];return i&&!n.includes(i)?kc(i,o):hi(o)},kc=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return wf(e,r)}switch(t){case be.bool:return yf(e);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return vf(e);case be.json:case be.jsonb:return bf(e);case be.timestamp:return _f(e);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return hi(e);default:return hi(e)}},hi=t=>t,yf=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},vf=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},bf=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},wf=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>kc(e,a))}return t},_f=t=>typeof t=="string"?t.replace(" ","T"):t,Ac=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ps{constructor(e,r,n={},s=ui){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ra;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ra||(ra={}));class Jr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Jr.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Jr.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const h=u.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),g=u.filter(m=>f.indexOf(m.presence_ref)<0),p=d.filter(m=>h.indexOf(m.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}n(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var na;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(na||(na={}));var Yr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Yr||(Yr={}));var mt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(mt||(mt={}));class Fi{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ps(this,lt.join,this.params,this.timeout),this.rejoinTimer=new xc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Me.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Jr(this),this.broadcastEndpointURL=Ac(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Me.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Yr.PRESENCE]&&this.bindings[Yr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e?.(mt.CHANNEL_ERROR,f)),this._onClose(()=>e?.(mt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e?.(mt.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(g=p?.length)!==null&&g!==void 0?g:0,S=[];for(let v=0;v<m;v++){const _=p[v],{filter:{event:E,schema:A,table:I,filter:b}}=_,R=f&&f[v];if(R&&R.event===E&&R.schema===A&&R.table===I&&R.filter===b)S.push(Object.assign(Object.assign({},_),{id:R.id}));else{this.unsubscribe(),this.state=Me.errored,e?.(mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(mt.SUBSCRIBED);return}}).receive("error",f=>{this.state=Me.errored,e?.(mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Me.joined&&e===Yr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Me.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ps(this,lt.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Me.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ps(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pf){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=lt;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,p,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(p=f.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,p,m,S,v,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,A=(g=f.filter)===null||g===void 0?void 0:g.event;return E&&((p=r.ids)===null||p===void 0?void 0:p.includes(E))&&(A==="*"||A?.toLocaleLowerCase()===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const E=(v=(S=f?.filter)===null||S===void 0?void 0:S.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return E==="*"||E===((_=r?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:m,commit_timestamp:S,type:v,errors:_}=g;h=Object.assign(Object.assign({},{schema:p,table:m,commit_timestamp:S,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(g))}f.callback(h,n)})}_isClosed(){return this.state===Me.closed}_isJoined(){return this.state===Me.joined}_isJoining(){return this.state===Me.joining}_isLeaving(){return this.state===Me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Fi.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lt.close,{},e)}_onError(e){this._on(lt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ta(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ta(e.columns,e.old_record)),r}}const xs=()=>{},jn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sf=[1e3,2e3,5e3,1e4],Tf=1e4,Ef=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pf{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ui,this.transport=null,this.heartbeatIntervalMs=jn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xs,this.ref=0,this.reconnectTimer=null,this.logger=xs,this.conn=null,this.sendBuffer=[],this.serializer=new gf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Cr(async()=>{const{default:a}=await Promise.resolve().then(()=>rr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${di.websocket}`,this.httpEndpoint=Ac(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cf.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hf}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Gr.connecting:return Kt.Connecting;case Gr.open:return Kt.Open;case Gr.closing:return Kt.Closing;default:return Kt.Closed}}isConnected(){return this.connectionState()===Kt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Fi(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ff,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},jn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(lt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Ef],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:df};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(lt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new xc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,l,c,u;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:ui,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:jn.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:xs,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(d=>Sf[d-1]||Tf),this.encode=(c=e?.encode)!==null&&c!==void 0?c:((d,h)=>h(JSON.stringify(d))),this.decode=(u=e?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Ni extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class xf extends Ni{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fi extends Ni{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Wi=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(async()=>{const{default:n}=await Promise.resolve().then(()=>rr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},kf=()=>$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cr(()=>Promise.resolve().then(()=>rr),void 0)).Response:Response}),pi=t=>{if(Array.isArray(t))return t.map(r=>pi(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=pi(n)}),e},Af=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ks=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Rf=(t,e,r)=>$(void 0,void 0,void 0,function*(){const n=yield kf();t instanceof n&&!r?.noResolveJson?t.json().then(s=>{const i=t.status||500,o=s?.statusCode||i+"";e(new xf(ks(s),i,o))}).catch(s=>{e(new fi(ks(s),s))}):e(new fi(ks(t),t))}),Of=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!n?s:(Af(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function un(t,e,r,n,s,i){return $(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,Of(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Rf(l,a,n))})})}function rn(t,e,r,n){return $(this,void 0,void 0,function*(){return un(t,"GET",e,r,n)})}function ot(t,e,r,n,s){return $(this,void 0,void 0,function*(){return un(t,"POST",e,n,s,r)})}function gi(t,e,r,n,s){return $(this,void 0,void 0,function*(){return un(t,"PUT",e,n,s,r)})}function Cf(t,e,r,n){return $(this,void 0,void 0,function*(){return un(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function qi(t,e,r,n,s){return $(this,void 0,void 0,function*(){return un(t,"DELETE",e,n,s,r)})}class jf{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return $(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}var Rc;class If{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Rc]="BlobDownloadBuilder",this.promise=null}asStream(){return new jf(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return $(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}Rc=Symbol.toStringTag;const Df={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Lf{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Wi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return $(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},sa),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),d=yield(e=="PUT"?gi:ot)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}upload(e,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return $(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:sa.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield gi(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(xe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return $(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r?.upsert&&(s["x-upsert"]="true");const i=yield ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ni("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}update(e,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return $(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}copy(e,r,n){return $(this,void 0,void 0,function*(){try{return{data:{path:(yield ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return $(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ot(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return $(this,void 0,void 0,function*(){try{const s=yield ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>rn(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new If(l,this.shouldThrowOnError)}info(e){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield rn(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:pi(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}exists(e){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Cf(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n)&&n instanceof fi){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return $(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}list(e,r,n){return $(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Df),r),{prefix:e||""});return{data:yield ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}listV2(e,r){return $(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Oc="2.76.1",Cc={"X-Client-Info":`storage-js/${Oc}`};class Mf{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cc),r),this.fetch=Wi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}createBucket(e){return $(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return $(this,void 0,void 0,function*(){try{return{data:yield gi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}}class Vf{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cc),r),this.fetch=Wi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}listBuckets(e){return $(this,void 0,void 0,function*(){try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,i=yield rn(this.fetch,s,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>a.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}}const zi={"X-Client-Info":`storage-js/${Oc}`,"Content-Type":"application/json"};class jc extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ye(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class As extends jc{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $f extends jc{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var ia;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ia||(ia={}));const Hi=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(async()=>{const{default:n}=await Promise.resolve().then(()=>rr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Uf=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},oa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Bf=(t,e,r)=>$(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||s+"";e(new As(oa(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new As(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new As(a,s,o))}}else e(new $f(oa(t),t))}),Ff=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return n?(Uf(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function Nf(t,e,r,n,s,i){return $(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,Ff(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Bf(l,a,n))})})}function Xe(t,e,r,n,s){return $(this,void 0,void 0,function*(){return Nf(t,"POST",e,n,s,r)})}class Wf{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zi),r),this.fetch=Hi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return $(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}getIndex(e,r){return $(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}listIndexes(e){return $(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return $(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}}class qf{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zi),r),this.fetch=Hi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return $(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Xe(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}getVectors(e){return $(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}listVectors(e){return $(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Xe(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}queryVectors(e){return $(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}deleteVectors(e){return $(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Xe(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}}class zf{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zi),r),this.fetch=Hi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return $(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}getBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}listBuckets(){return $(this,arguments,void 0,function*(e={}){try{return{data:yield Xe(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}deleteBucket(e){return $(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}}class Hf extends zf{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Kf(this.url,this.headers,e,this.fetch)}}class Kf extends Wf{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return $(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return $(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return $(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return $(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Gf(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Gf extends qf{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return $(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return $(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return $(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return $(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return $(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Jf extends Mf{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new Lf(this.url,this.headers,e,this.fetch)}get vectors(){return new Hf(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Vf(this.url+"/iceberg",this.headers,this.fetch)}}const Yf="2.76.1";let zr="";typeof Deno<"u"?zr="deno":typeof document<"u"?zr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zr="react-native":zr="node";const Xf={"X-Client-Info":`supabase-js-${zr}/${Yf}`},Qf={headers:Xf},Zf={schema:"public"},ep={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tp={},rp=t=>{let e;return t?e=t:typeof fetch>"u"?e=wc:e=fetch,(...r)=>e(...r)},np=()=>typeof Headers>"u"?_c:Headers,sp=(t,e,r)=>{const n=rp(r),s=np();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function ip(t){return t.endsWith("/")?t:t+"/"}function op(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(r=d?.headers)!==null&&r!==void 0?r:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function ap(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ip(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ic="2.76.1",vr=30*1e3,mi=3,Rs=mi*vr,lp="http://localhost:9999",cp="supabase.auth.token",up={"X-Client-Info":`gotrue-js/${Ic}`},yi="X-Supabase-Api-Version",Dc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hp=600*1e3;class nn extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class fp extends nn{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function pp(t){return H(t)&&t.name==="AuthApiError"}class Gt extends nn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Dt extends nn{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Pt extends Dt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gp(t){return H(t)&&t.name==="AuthSessionMissingError"}class dr extends Dt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class In extends Dt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dn extends Dt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mp(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class aa extends Dt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vi extends Dt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Os(t){return H(t)&&t.name==="AuthRetryableFetchError"}class la extends Dt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class bi extends Dt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ca=` 	
\r=`.split(""),yp=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ca.length;e+=1)t[ca[e].charCodeAt(0)]=-2;for(let e=0;e<Gn.length;e+=1)t[Gn[e].charCodeAt(0)]=e;return t})();function ua(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Gn[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Gn[n]),e.queuedBits-=6}}function Lc(t,e,r){const n=yp[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function da(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{wp(o,n,r)};for(let o=0;o<t.length;o+=1)Lc(t.charCodeAt(o),s,i);return e.join("")}function vp(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function bp(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}vp(n,e)}}function wp(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Er(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Lc(t.charCodeAt(s),r,n);return new Uint8Array(e)}function _p(t){const e=[];return bp(t,r=>e.push(r)),new Uint8Array(e)}function Xt(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>ua(s,r,n)),ua(null,r,n),e.join("")}function Sp(t){return Math.round(Date.now()/1e3)+t}function Tp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ge=()=>typeof window<"u"&&typeof document<"u",Ut={tested:!1,writable:!1},Mc=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ut.tested)return Ut.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ut.tested=!0,Ut.writable=!0}catch{Ut.tested=!0,Ut.writable=!1}return Ut.writable};function Ep(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Vc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Cr(async()=>{const{default:n}=await Promise.resolve().then(()=>rr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Pp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",br=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Bt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tt=async(t,e)=>{await t.removeItem(e)};class as{constructor(){this.promise=new as.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}as.promiseConstructor=Promise;function Cs(t){const e=t.split(".");if(e.length!==3)throw new bi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!dp.test(e[n]))throw new bi("JWT not in base64url format");return{header:JSON.parse(da(e[0])),payload:JSON.parse(da(e[1])),signature:Er(e[2]),raw:{header:e[0],payload:e[1]}}}async function xp(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function kp(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Ap(t){return("0"+t.toString(16)).substr(-2)}function Rp(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Ap).join("")}async function Op(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Cp(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Op(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hr(t,e,r=!1){const n=Rp();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await br(t,`${e}-code-verifier`,s);const i=await Cp(n);return[i,n===i?"plain":"s256"]}const jp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ip(t){const e=t.headers.get(yi);if(!e||!e.match(jp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Lp(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fr(t){if(!Mp.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function js(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ha(t){return JSON.parse(JSON.stringify(t))}const Nt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vp=[502,503,504];async function fa(t){var e;if(!Pp(t))throw new vi(Nt(t),0);if(Vp.includes(t.status))throw new vi(Nt(t),t.status);let r;try{r=await t.json()}catch(i){throw new Gt(Nt(i),i)}let n;const s=Ip(t);if(s&&s.getTime()>=Dc["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new la(Nt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new la(Nt(r),t.status,r.weak_password.reasons);throw new fp(Nt(r),t.status||500,n)}const $p=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Z(t,e,r,n){var s;const i=Object.assign({},n?.headers);i[yi]||(i[yi]=Dc["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Up(t,e,r+a,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function Up(t,e,r,n,s,i){const o=$p(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new vi(Nt(l),0)}if(a.ok||await fa(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await fa(l)}}function it(t){var e;let r=null;Np(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Sp(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function pa(t){const e=it(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function At(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Bp(t){return{data:t,error:null}}function Fp(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=tr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ga(t){return t}function Np(t){return t.access_token&&t.refresh_token&&t.expires_in}const Is=["global","local","others"];class Wp{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Vc(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Is[0]){if(Is.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Is.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:At})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=tr(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Fp,redirectTo:r?.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:At})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ga});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(H(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){fr(e);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:At})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){fr(e);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:At})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){fr(e);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:At})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){fr(e.userId);try{const{data:r,error:n}=await Z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(e){fr(e.userId),fr(e.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ga});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(H(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}}function ma(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const pr={debug:!!(globalThis&&Mc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $c extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qp extends $c{}async function zp(t,e,r){pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),pr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new qp(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(pr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Hp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Uc(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Kp(t){return parseInt(t,16)}function Gp(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Jp(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=Uc(t.address),g=u?`${u}://${n}`:n,p=t.statement?`${t.statement}
`:"",m=`${g} wants you to sign in with your Ethereum account:
${f}

${p}`;let S=`URI: ${d}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(S+=`
Expiration Time: ${s.toISOString()}`),a&&(S+=`
Not Before: ${a.toISOString()}`),l&&(S+=`
Request ID: ${l}`),c){let v=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);v+=`
- ${_}`}S+=v}return`${m}
${S}`}class Le extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Jn extends Le{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Yp({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Le({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Le({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Le({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Le({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Le({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Le({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Le({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Le({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Bc(o)){if(i.rp.id!==o)return new Le({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Le({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Le({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Xp({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Le({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Le({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Bc(n)){if(r.rpId!==n)return new Le({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Le({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Qp{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Zp=new Qp;function eg(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=tr(t,["challenge","user","excludeCredentials"]),i=Er(e).buffer,o=Object.assign(Object.assign({},r),{id:Er(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Er(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function tg(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=tr(t,["challenge","allowCredentials"]),s=Er(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Er(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Xt(new Uint8Array(t.response.attestationObject)),clientDataJSON:Xt(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ng(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Xt(new Uint8Array(s.authenticatorData)),clientDataJSON:Xt(new Uint8Array(s.clientDataJSON)),signature:Xt(new Uint8Array(s.signature)),userHandle:s.userHandle?Xt(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bc(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ya(){var t,e;return!!(Ge()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function sg(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Jn("Browser returned unexpected credential type",e)}:{data:null,error:new Jn("Empty credential response",e)}}catch(e){return{data:null,error:Yp({error:e,options:t})}}}async function ig(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Jn("Browser returned unexpected credential type",e)}:{data:null,error:new Jn("Empty credential response",e)}}catch(e){return{data:null,error:Xp({error:e,options:t})}}}const og={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ag={userVerification:"preferred",hints:["security-key"]};function Yn(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=Yn(a,o):n[i]=Yn(o)}else n[i]=o}return n}function lg(t,e){return Yn(og,t,e||{})}function cg(t,e){return Yn(ag,t,e||{})}class ug{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=s??Zp.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=lg(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:d}=await sg({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=cg(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:d}=await ig(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new Gt("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new nn("rpId is required for WebAuthn authentication")};try{if(!ya())return{data:null,error:new Gt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new Gt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new nn("rpId is required for WebAuthn registration")};try{if(!ya())return{data:null,error:new Gt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new Gt("Unexpected error in register",o)}}}}Hp();const dg={url:lp,storageKey:cp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:up,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function va(t,e,r){return await r()}const gr={};class sn{get jwks(){var e,r;return(r=(e=gr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){gr[this.storageKey]=Object.assign(Object.assign({},gr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=gr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){gr[this.storageKey]=Object.assign(Object.assign({},gr[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sn.nextInstanceID,sn.nextInstanceID+=1,this.instanceID>0&&Ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},dg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Wp({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Vc(s.fetch),this.lock=s.lock||va,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ge()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=zp:this.lock=va,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ug(this)},this.persistSession?(s.storage?this.storage=s.storage:Mc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ma(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ma(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ic}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Ep(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ge()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),mp(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new Gt("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:it}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await hr(this.storage,this.storageKey)),i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:g},xform:it})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(s=h?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:it})}else throw new In("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:pa})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:pa})}else throw new In("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new dr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,l,c,u,d,h;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:p,wallet:m,statement:S,options:v}=e;let _;if(Ge())if(typeof m=="object")_=m;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")_=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=m}const E=new URL((r=v?.url)!==null&&r!==void 0?r:window.location.href),A=await _.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Uc(A[0]);let b=(n=v?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!b){const j=await _.request({method:"eth_chainId"});b=Kp(j)}const R={domain:E.host,address:I,statement:S,uri:E.href,version:"1",chainId:b,nonce:(s=v?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=v?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=v?.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=Jp(R),g=await _.request({method:"personal_sign",params:[Gp(f),I]})}try{const{data:p,error:m}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:it});if(m)throw m;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new dr}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:m})}catch(p){if(H(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithSolana(e){var r,n,s,i,o,a,l,c,u,d,h,f;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:m,wallet:S,statement:v,options:_}=e;let E;if(Ge())if(typeof S=="object")E=S;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))E=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=S}const A=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const I=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),v?{statement:v}:null));let b;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")b=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)b=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)g=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),p=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(n=_?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(u=_?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const I=await E.signMessage(new TextEncoder().encode(g),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=I}}try{const{data:m,error:S}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Xt(p)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:it});if(S)throw S;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new dr}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:S})}catch(m){if(H(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const r=await Bt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:it});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(H(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:it}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new dr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await hr(this.storage,this.storageKey));const{error:d}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new In("You must provide either an email or phone number.")}catch(a){if(H(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:it});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await hr(this.storage,this.storageKey)),await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Bp})}catch(i){if(H(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pt;const{error:s}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new In("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Bt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Rs:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Bt(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=js()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:At}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pt}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:At})})}catch(r){if(H(r))return gp(r)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Pt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await hr(this.storage,this.storageKey));const{data:c,error:u}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:At});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Cs(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Pt;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ge())throw new Dn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new aa("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new aa("No code detected.");const{data:v,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Dn("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=vr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const g=h-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:p,error:m}=await this._getUser(i);if(m)throw m;const S={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Bt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(pp(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Tp(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await hr(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(H(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ge()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(H(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:it}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new dr}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:f})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await kp(async s=>(s>0&&await xp(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:it})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Os(i)&&Date.now()+o-n<vr})}catch(n){if(this._debug(r,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Bt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Bt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await br(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o?.user)!==null&&e!==void 0?e:js()}else if(s&&!s.user&&!s.user){const o=await Bt(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await Tt(this.storage,this.storageKey+"-user"),await br(this.storage,this.storageKey,s)):s.user=js()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Rs;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Rs}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Os(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new as;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Pt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),H(i)){const o={data:null,error:i};return Os(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await br(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=ha(s);await br(this.storage,this.storageKey,i)}else{const s=ha(r);await br(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ge()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/vr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${vr}ms, refresh threshold is ${mi} ticks`),s<=mi&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $c)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await hr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((s=l?.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?rg(e.webauthn.credential_response):ng(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const o=await Z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:eg(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:tg(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Cs(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+hp>s)return n;const{data:i,error:o}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Cs(n);r?.allowExpired||Dp(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=Lp(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,_p(`${a}.${l}`)))throw new bi("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}sn.nextInstanceID=0;const hg=sn;class fg extends hg{constructor(e){super(e)}}class pg{constructor(e,r,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=r;const a=ap(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Zf,realtime:tp,auth:Object.assign(Object.assign({},ep),{storageKey:l}),global:Qf},u=op(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=sp(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new lf(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Jf(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Xh(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fg({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Pf(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tw=(t,e,r)=>new pg(t,e,r);function gg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}gg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Ds={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ls,ba;function Fc(){if(ba)return Ls;ba=1;var t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function s(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;var l=Object.getOwnPropertyNames(o).map(function(u){return o[u]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(u){c[u]=u}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ls=s()?Object.assign:function(i,o){for(var a,l=n(i),c,u=1;u<arguments.length;u++){a=Object(arguments[u]);for(var d in a)e.call(a,d)&&(l[d]=a[d]);if(t){c=t(a);for(var h=0;h<c.length;h++)r.call(a,c[h])&&(l[c[h]]=a[c[h]])}}return l},Ls}var Ms,wa;function Nc(){if(wa)return Ms;wa=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ms=t,Ms}var Vs,_a;function Wc(){return _a||(_a=1,Vs=Function.call.bind(Object.prototype.hasOwnProperty)),Vs}var $s,Sa;function mg(){if(Sa)return $s;Sa=1;var t=function(){};{var e=Nc(),r={},n=Wc();t=function(i){var o="Warning: "+i;typeof console<"u"&&console.error(o);try{throw new Error(o)}catch{}}}function s(i,o,a,l,c){for(var u in i)if(n(i,u)){var d;try{if(typeof i[u]!="function"){var h=Error((l||"React class")+": "+a+" type `"+u+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[u]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw h.name="Invariant Violation",h}d=i[u](o,u,l,a,null,e)}catch(g){d=g}if(d&&!(d instanceof Error)&&t((l||"React class")+": type specification of "+a+" `"+u+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in r)){r[d.message]=!0;var f=c?c():"";t("Failed "+a+" type: "+d.message+(f??""))}}}return s.resetWarningCache=function(){r={}},$s=s,$s}var Us,Ta;function yg(){if(Ta)return Us;Ta=1;var t=jl(),e=Fc(),r=Nc(),n=Wc(),s=mg(),i=function(){};i=function(a){var l="Warning: "+a;typeof console<"u"&&console.error(l);try{throw new Error(l)}catch{}};function o(){return null}return Us=function(a,l){var c=typeof Symbol=="function"&&Symbol.iterator,u="@@iterator";function d(x){var P=x&&(c&&x[c]||x[u]);if(typeof P=="function")return P}var h="<<anonymous>>",f={array:S("array"),bigint:S("bigint"),bool:S("boolean"),func:S("function"),number:S("number"),object:S("object"),string:S("string"),symbol:S("symbol"),any:v(),arrayOf:_,element:E(),elementType:A(),instanceOf:I,node:q(),objectOf:R,oneOf:b,oneOfType:j,shape:L,exact:ee};function g(x,P){return x===P?x!==0||1/x===1/P:x!==x&&P!==P}function p(x,P){this.message=x,this.data=P&&typeof P=="object"?P:{},this.stack=""}p.prototype=Error.prototype;function m(x){var P={},F=0;function U(Y,K,X,ne,le,se,Ee){if(ne=ne||h,se=se||X,Ee!==r){if(l){var ue=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw ue.name="Invariant Violation",ue}else if(typeof console<"u"){var $e=ne+":"+X;!P[$e]&&F<3&&(i("You are manually calling a React.PropTypes validation function for the `"+se+"` prop on `"+ne+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),P[$e]=!0,F++)}}return K[X]==null?Y?K[X]===null?new p("The "+le+" `"+se+"` is marked as required "+("in `"+ne+"`, but its value is `null`.")):new p("The "+le+" `"+se+"` is marked as required in "+("`"+ne+"`, but its value is `undefined`.")):null:x(K,X,ne,le,se)}var G=U.bind(null,!1);return G.isRequired=U.bind(null,!0),G}function S(x){function P(F,U,G,Y,K,X){var ne=F[U],le=te(ne);if(le!==x){var se=Se(ne);return new p("Invalid "+Y+" `"+K+"` of type "+("`"+se+"` supplied to `"+G+"`, expected ")+("`"+x+"`."),{expectedType:x})}return null}return m(P)}function v(){return m(o)}function _(x){function P(F,U,G,Y,K){if(typeof x!="function")return new p("Property `"+K+"` of component `"+G+"` has invalid PropType notation inside arrayOf.");var X=F[U];if(!Array.isArray(X)){var ne=te(X);return new p("Invalid "+Y+" `"+K+"` of type "+("`"+ne+"` supplied to `"+G+"`, expected an array."))}for(var le=0;le<X.length;le++){var se=x(X,le,G,Y,K+"["+le+"]",r);if(se instanceof Error)return se}return null}return m(P)}function E(){function x(P,F,U,G,Y){var K=P[F];if(!a(K)){var X=te(K);return new p("Invalid "+G+" `"+Y+"` of type "+("`"+X+"` supplied to `"+U+"`, expected a single ReactElement."))}return null}return m(x)}function A(){function x(P,F,U,G,Y){var K=P[F];if(!t.isValidElementType(K)){var X=te(K);return new p("Invalid "+G+" `"+Y+"` of type "+("`"+X+"` supplied to `"+U+"`, expected a single ReactElement type."))}return null}return m(x)}function I(x){function P(F,U,G,Y,K){if(!(F[U]instanceof x)){var X=x.name||h,ne=Ae(F[U]);return new p("Invalid "+Y+" `"+K+"` of type "+("`"+ne+"` supplied to `"+G+"`, expected ")+("instance of `"+X+"`."))}return null}return m(P)}function b(x){if(!Array.isArray(x))return arguments.length>1?i("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):i("Invalid argument supplied to oneOf, expected an array."),o;function P(F,U,G,Y,K){for(var X=F[U],ne=0;ne<x.length;ne++)if(g(X,x[ne]))return null;var le=JSON.stringify(x,function(Ee,ue){var $e=Se(ue);return $e==="symbol"?String(ue):ue});return new p("Invalid "+Y+" `"+K+"` of value `"+String(X)+"` "+("supplied to `"+G+"`, expected one of "+le+"."))}return m(P)}function R(x){function P(F,U,G,Y,K){if(typeof x!="function")return new p("Property `"+K+"` of component `"+G+"` has invalid PropType notation inside objectOf.");var X=F[U],ne=te(X);if(ne!=="object")return new p("Invalid "+Y+" `"+K+"` of type "+("`"+ne+"` supplied to `"+G+"`, expected an object."));for(var le in X)if(n(X,le)){var se=x(X,le,G,Y,K+"."+le,r);if(se instanceof Error)return se}return null}return m(P)}function j(x){if(!Array.isArray(x))return i("Invalid argument supplied to oneOfType, expected an instance of array."),o;for(var P=0;P<x.length;P++){var F=x[P];if(typeof F!="function")return i("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+de(F)+" at index "+P+"."),o}function U(G,Y,K,X,ne){for(var le=[],se=0;se<x.length;se++){var Ee=x[se],ue=Ee(G,Y,K,X,ne,r);if(ue==null)return null;ue.data&&n(ue.data,"expectedType")&&le.push(ue.data.expectedType)}var $e=le.length>0?", expected one of type ["+le.join(", ")+"]":"";return new p("Invalid "+X+" `"+ne+"` supplied to "+("`"+K+"`"+$e+"."))}return m(U)}function q(){function x(P,F,U,G,Y){return ie(P[F])?null:new p("Invalid "+G+" `"+Y+"` supplied to "+("`"+U+"`, expected a ReactNode."))}return m(x)}function ge(x,P,F,U,G){return new p((x||"React class")+": "+P+" type `"+F+"."+U+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+G+"`.")}function L(x){function P(F,U,G,Y,K){var X=F[U],ne=te(X);if(ne!=="object")return new p("Invalid "+Y+" `"+K+"` of type `"+ne+"` "+("supplied to `"+G+"`, expected `object`."));for(var le in x){var se=x[le];if(typeof se!="function")return ge(G,Y,K,le,Se(se));var Ee=se(X,le,G,Y,K+"."+le,r);if(Ee)return Ee}return null}return m(P)}function ee(x){function P(F,U,G,Y,K){var X=F[U],ne=te(X);if(ne!=="object")return new p("Invalid "+Y+" `"+K+"` of type `"+ne+"` "+("supplied to `"+G+"`, expected `object`."));var le=e({},F[U],x);for(var se in le){var Ee=x[se];if(n(x,se)&&typeof Ee!="function")return ge(G,Y,K,se,Se(Ee));if(!Ee)return new p("Invalid "+Y+" `"+K+"` key `"+se+"` supplied to `"+G+"`.\nBad object: "+JSON.stringify(F[U],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(x),null,"  "));var ue=Ee(X,se,G,Y,K+"."+se,r);if(ue)return ue}return null}return m(P)}function ie(x){switch(typeof x){case"number":case"string":case"undefined":return!0;case"boolean":return!x;case"object":if(Array.isArray(x))return x.every(ie);if(x===null||a(x))return!0;var P=d(x);if(P){var F=P.call(x),U;if(P!==x.entries){for(;!(U=F.next()).done;)if(!ie(U.value))return!1}else for(;!(U=F.next()).done;){var G=U.value;if(G&&!ie(G[1]))return!1}}else return!1;return!0;default:return!1}}function ye(x,P){return x==="symbol"?!0:P?P["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&P instanceof Symbol:!1}function te(x){var P=typeof x;return Array.isArray(x)?"array":x instanceof RegExp?"object":ye(P,x)?"symbol":P}function Se(x){if(typeof x>"u"||x===null)return""+x;var P=te(x);if(P==="object"){if(x instanceof Date)return"date";if(x instanceof RegExp)return"regexp"}return P}function de(x){var P=Se(x);switch(P){case"array":case"object":return"an "+P;case"boolean":case"date":case"regexp":return"a "+P;default:return P}}function Ae(x){return!x.constructor||!x.constructor.name?h:x.constructor.name}return f.checkPropTypes=s,f.resetWarningCache=s.resetWarningCache,f.PropTypes=f,f},Us}var Ea;function vg(){if(Ea)return Ds.exports;Ea=1;{var t=jl(),e=!0;Ds.exports=yg()(t.isElement,e)}return Ds.exports}var bg=vg();const rw=Ii(bg);var wg=Fc();const nw=Ii(wg),qc=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ls=C.createContext({}),cs=C.createContext(null),us=typeof document<"u",Ki=us?C.useLayoutEffect:C.useEffect,zc=C.createContext({strict:!1}),Gi=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_g="framerAppearId",Hc="data-"+Gi(_g);function Sg(t,e,r,n){const{visualElement:s}=C.useContext(ls),i=C.useContext(zc),o=C.useContext(cs),a=C.useContext(qc).reducedMotion,l=C.useRef();n=n||i.renderer,!l.current&&n&&(l.current=n(t,{visualState:e,parent:s,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;C.useInsertionEffect(()=>{c&&c.update(r,o)});const u=C.useRef(!!(r[Hc]&&!window.HandoffComplete));return Ki(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),C.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function wr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Tg(t,e,r){return C.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):wr(r)&&(r.current=n))},[e])}function on(t){return typeof t=="string"||Array.isArray(t)}function ds(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ji=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yi=["initial",...Ji];function hs(t){return ds(t.animate)||Yi.some(e=>on(t[e]))}function Kc(t){return!!(hs(t)||t.variants)}function Eg(t,e){if(hs(t)){const{initial:r,animate:n}=t;return{initial:r===!1||on(r)?r:void 0,animate:on(n)?n:void 0}}return t.inherit!==!1?e:{}}function Pg(t){const{initial:e,animate:r}=Eg(t,C.useContext(ls));return C.useMemo(()=>({initial:e,animate:r}),[Pa(e),Pa(r)])}function Pa(t){return Array.isArray(t)?t.join(" "):t}const xa={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},an={};for(const t in xa)an[t]={isEnabled:e=>xa[t].some(r=>!!e[r])};function xg(t){for(const e in t)an[e]={...an[e],...t[e]}}const Xi=C.createContext({}),Gc=C.createContext({}),kg=Symbol.for("motionComponentSymbol");function Ag({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){t&&xg(t);function i(a,l){let c;const u={...C.useContext(qc),...a,layoutId:Rg(a)},{isStatic:d}=u,h=Pg(a),f=n(a,d);if(!d&&us){h.visualElement=Sg(s,f,u,e);const g=C.useContext(Gc),p=C.useContext(zc).strict;h.visualElement&&(c=h.visualElement.loadFeatures(u,p,t,g))}return C.createElement(ls.Provider,{value:h},c&&h.visualElement?C.createElement(c,{visualElement:h.visualElement,...u}):null,r(s,a,Tg(f,h.visualElement,l),f,d,h.visualElement))}const o=C.forwardRef(i);return o[kg]=s,o}function Rg({layoutId:t}){const e=C.useContext(Xi).id;return e&&t!==void 0?e+"-"+t:t}function Og(t){function e(n,s={}){return Ag(t(n,s))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,s)=>(r.has(s)||r.set(s,e(s)),r.get(s))})}const Cg=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Qi(t){return typeof t!="string"||t.includes("-")?!1:!!(Cg.indexOf(t)>-1||/[A-Z]/.test(t))}const Xn={};function jg(t){Object.assign(Xn,t)}const dn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nr=new Set(dn);function Jc(t,{layout:e,layoutId:r}){return nr.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Xn[t]||t==="opacity")}const Ke=t=>!!(t&&t.getVelocity),Ig={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Dg=dn.length;function Lg(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,s){let i="";for(let o=0;o<Dg;o++){const a=dn[o];if(t[a]!==void 0){const l=Ig[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,n?"":i):r&&n&&(i="none"),i}const Yc=t=>e=>typeof e=="string"&&e.startsWith(t),Xc=Yc("--"),wi=Yc("var(--"),Mg=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Vg=(t,e)=>e&&typeof t=="number"?e.transform(t):t,jt=(t,e,r)=>Math.min(Math.max(r,t),e),sr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xr={...sr,transform:t=>jt(0,1,t)},Ln={...sr,default:1},Qr=t=>Math.round(t*1e5)/1e5,fs=/(-)?([\d]*\.?[\d])+/g,Qc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$g=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hn(t){return typeof t=="string"}const fn=t=>({test:e=>hn(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xt=fn("deg"),dt=fn("%"),J=fn("px"),Ug=fn("vh"),Bg=fn("vw"),ka={...dt,parse:t=>dt.parse(t)/100,transform:t=>dt.transform(t*100)},Aa={...sr,transform:Math.round},Zc={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,size:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,rotate:xt,rotateX:xt,rotateY:xt,rotateZ:xt,scale:Ln,scaleX:Ln,scaleY:Ln,scaleZ:Ln,skew:xt,skewX:xt,skewY:xt,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:Xr,originX:ka,originY:ka,originZ:J,zIndex:Aa,fillOpacity:Xr,strokeOpacity:Xr,numOctaves:Aa};function Zi(t,e,r,n){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const h=e[d];if(Xc(d)){i[d]=h;continue}const f=Zc[d],g=Vg(h,f);if(nr.has(d)){if(l=!0,o[d]=g,!u)continue;h!==(f.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=g):s[d]=g}if(e.transform||(l||n?s.transform=Lg(t.transform,r,u,n):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:f=0}=a;s.transformOrigin=`${d} ${h} ${f}`}}const eo=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eu(t,e,r){for(const n in e)!Ke(e[n])&&!Jc(n,r)&&(t[n]=e[n])}function Fg({transformTemplate:t},e,r){return C.useMemo(()=>{const n=eo();return Zi(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function Ng(t,e,r){const n=t.style||{},s={};return eu(s,n,t),Object.assign(s,Fg(t,e,r)),t.transformValues?t.transformValues(s):s}function Wg(t,e,r){const n={},s=Ng(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const qg=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qn(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qg.has(t)}let tu=t=>!Qn(t);function zg(t){t&&(tu=e=>e.startsWith("on")?!Qn(e):t(e))}try{zg(require("@emotion/is-prop-valid").default)}catch{}function Hg(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(tu(s)||r===!0&&Qn(s)||!e&&!Qn(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function Ra(t,e,r){return typeof t=="string"?t:J.transform(e+r*t)}function Kg(t,e,r){const n=Ra(e,t.x,t.width),s=Ra(r,t.y,t.height);return`${n} ${s}`}const Gg={offset:"stroke-dashoffset",array:"stroke-dasharray"},Jg={offset:"strokeDashoffset",array:"strokeDasharray"};function Yg(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?Gg:Jg;t[i.offset]=J.transform(-n);const o=J.transform(e),a=J.transform(r);t[i.array]=`${o} ${a}`}function to(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,h){if(Zi(t,c,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:p}=t;f.transform&&(p&&(g.transform=f.transform),delete f.transform),p&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=Kg(p,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&Yg(f,o,a,l,!1)}const ru=()=>({...eo(),attrs:{}}),ro=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Xg(t,e,r,n){const s=C.useMemo(()=>{const i=ru();return to(i,e,{enableHardwareAcceleration:!1},ro(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};eu(i,t.style,t),s.style={...i,...s.style}}return s}function Qg(t=!1){return(r,n,s,{latestValues:i},o)=>{const l=(Qi(r)?Xg:Wg)(n,i,o,r),u={...Hg(n,typeof r=="string",t),...l,ref:s},{children:d}=n,h=C.useMemo(()=>Ke(d)?d.get():d,[d]);return C.createElement(r,{...u,children:h})}}function nu(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const su=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iu(t,e,r,n){nu(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(su.has(s)?s:Gi(s),e.attrs[s])}function no(t,e){const{style:r}=t,n={};for(const s in r)(Ke(r[s])||e.style&&Ke(e.style[s])||Jc(s,t))&&(n[s]=r[s]);return n}function ou(t,e){const r=no(t,e);for(const n in t)if(Ke(t[n])||Ke(e[n])){const s=dn.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=t[n]}return r}function so(t,e,r,n={},s={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,s)),e}function au(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const Zn=t=>Array.isArray(t),Zg=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),em=t=>Zn(t)?t[t.length-1]||0:t;function Wn(t){const e=Ke(t)?t.get():t;return Zg(e)?e.toValue():e}function tm({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,s,i){const o={latestValues:rm(n,s,i,t),renderState:e()};return r&&(o.mount=a=>r(n,a,o)),o}const lu=t=>(e,r)=>{const n=C.useContext(ls),s=C.useContext(cs),i=()=>tm(t,e,n,s);return r?i():au(i)};function rm(t,e,r,n){const s={},i=n(t,{});for(const h in i)s[h]=Wn(i[h]);let{initial:o,animate:a}=t;const l=hs(t),c=Kc(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!ds(d)&&(Array.isArray(d)?d:[d]).forEach(f=>{const g=so(t,f);if(!g)return;const{transitionEnd:p,transition:m,...S}=g;for(const v in S){let _=S[v];if(Array.isArray(_)){const E=u?_.length-1:0;_=_[E]}_!==null&&(s[v]=_)}for(const v in p)s[v]=p[v]}),s}const Ce=t=>t;class Oa{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function nm(t){let e=new Oa,r=new Oa,n=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&s,h=d?e:r;return c&&o.add(l),h.add(l)&&d&&s&&(n=e.order.length),l},cancel:l=>{r.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let c=0;c<n;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Mn=["prepare","read","update","preRender","render","postRender"],sm=40;function im(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Mn.reduce((d,h)=>(d[h]=nm(()=>r=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(d-s.timestamp,sm),1),s.timestamp=d,s.isProcessing=!0,Mn.forEach(o),s.isProcessing=!1,r&&e&&(n=!1,t(a))},l=()=>{r=!0,n=!0,s.isProcessing||t(a)};return{schedule:Mn.reduce((d,h)=>{const f=i[h];return d[h]=(g,p=!1,m=!1)=>(r||l(),f.schedule(g,p,m)),d},{}),cancel:d=>Mn.forEach(h=>i[h].cancel(d)),state:s,steps:i}}const{schedule:_e,cancel:wt,state:We,steps:Bs}=im(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ce,!0),om={useVisualState:lu({scrapeMotionValuesFromProps:ou,createRenderState:ru,onMount:(t,e,{renderState:r,latestValues:n})=>{_e.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),_e.render(()=>{to(r,n,{enableHardwareAcceleration:!1},ro(e.tagName),t.transformTemplate),iu(e,r)})}})},am={useVisualState:lu({scrapeMotionValuesFromProps:no,createRenderState:eo})};function lm(t,{forwardMotionProps:e=!1},r,n){return{...Qi(t)?om:am,preloadedFeatures:r,useRender:Qg(e),createVisualElement:n,Component:t}}function yt(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const cu=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function ps(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const cm=t=>e=>cu(e)&&t(e,ps(e));function vt(t,e,r,n){return yt(t,e,cm(r),n)}const um=(t,e)=>r=>e(t(r)),Ot=(...t)=>t.reduce(um);function uu(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const Ca=uu("dragHorizontal"),ja=uu("dragVertical");function du(t){let e=!1;if(t==="y")e=ja();else if(t==="x")e=Ca();else{const r=Ca(),n=ja();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function hu(){const t=du(!0);return t?(t(),!1):!0}class Lt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ia(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||hu())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[n]&&_e.update(()=>a[n](i,o))};return vt(t.current,r,s,{passive:!t.getProps()[n]})}class dm extends Lt{mount(){this.unmount=Ot(Ia(this.node,!0),Ia(this.node,!1))}unmount(){}}class hm extends Lt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ot(yt(this.node.current,"focus",()=>this.onFocus()),yt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fu=(t,e)=>e?t===e?!0:fu(t,e.parentElement):!1;function Fs(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,ps(r))}class fm extends Lt{constructor(){super(...arguments),this.removeStartListeners=Ce,this.removeEndListeners=Ce,this.removeAccessibleListeners=Ce,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=vt(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();_e.update(()=>{!d&&!fu(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(n.onTap||n.onPointerUp)}),o=vt(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ot(i,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Fs("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&_e.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=yt(this.node.current,"keyup",o),Fs("down",(a,l)=>{this.startPress(a,l)})},r=yt(this.node.current,"keydown",e),n=()=>{this.isPressing&&Fs("cancel",(i,o)=>this.cancelPress(i,o))},s=yt(this.node.current,"blur",n);this.removeAccessibleListeners=Ot(r,s)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&_e.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!hu()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&_e.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=vt(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=yt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ot(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const _i=new WeakMap,Ns=new WeakMap,pm=t=>{const e=_i.get(t.target);e&&e(t)},gm=t=>{t.forEach(pm)};function mm({root:t,...e}){const r=t||document;Ns.has(r)||Ns.set(r,{});const n=Ns.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(gm,{root:t,...e})),n[s]}function ym(t,e,r){const n=mm(e);return _i.set(t,r),n.observe(t),()=>{_i.delete(t),n.unobserve(t)}}const vm={some:0,all:1};class bm extends Lt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:vm[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return ym(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(wm(e,r))&&this.startObserver()}unmount(){}}function wm({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const _m={inView:{Feature:bm},tap:{Feature:fm},focus:{Feature:hm},hover:{Feature:dm}};function pu(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Sm(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function Tm(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function gs(t,e,r){const n=t.getProps();return so(n,e,r!==void 0?r:n.custom,Sm(t),Tm(t))}let pn=Ce,tt=Ce;pn=(t,e)=>{!t&&typeof console<"u"&&console.warn(e)},tt=(t,e)=>{if(!t)throw new Error(e)};const Ct=t=>t*1e3,bt=t=>t/1e3,Em={current:!1},gu=t=>Array.isArray(t)&&typeof t[0]=="number";function mu(t){return!!(!t||typeof t=="string"&&yu[t]||gu(t)||Array.isArray(t)&&t.every(mu))}const Hr=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,yu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hr([0,.65,.55,1]),circOut:Hr([.55,0,1,.45]),backIn:Hr([.31,.01,.66,-.59]),backOut:Hr([.33,1.53,.69,.99])};function vu(t){if(t)return gu(t)?Hr(t):Array.isArray(t)?t.map(vu):yu[t]}function Pm(t,e,r,{delay:n=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:r};l&&(c.offset=l);const u=vu(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:n,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function xm(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const bu=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,km=1e-7,Am=12;function Rm(t,e,r,n,s){let i,o,a=0;do o=e+(r-e)/2,i=bu(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>km&&++a<Am);return o}function gn(t,e,r,n){if(t===e&&r===n)return Ce;const s=i=>Rm(i,0,1,t,r);return i=>i===0||i===1?i:bu(s(i),e,n)}const Om=gn(.42,0,1,1),Cm=gn(0,0,.58,1),wu=gn(.42,0,.58,1),jm=t=>Array.isArray(t)&&typeof t[0]!="number",_u=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Su=t=>e=>1-t(1-e),io=t=>1-Math.sin(Math.acos(t)),Tu=Su(io),Im=_u(io),Eu=gn(.33,1.53,.69,.99),oo=Su(Eu),Dm=_u(oo),Lm=t=>(t*=2)<1?.5*oo(t):.5*(2-Math.pow(2,-10*(t-1))),Da={linear:Ce,easeIn:Om,easeInOut:wu,easeOut:Cm,circIn:io,circInOut:Im,circOut:Tu,backIn:oo,backInOut:Dm,backOut:Eu,anticipate:Lm},La=t=>{if(Array.isArray(t)){tt(t.length===4,"Cubic bezier arrays must contain four numerical values.");const[e,r,n,s]=t;return gn(e,r,n,s)}else if(typeof t=="string")return tt(Da[t]!==void 0,`Invalid easing type '${t}'`),Da[t];return t},ao=(t,e)=>r=>!!(hn(r)&&$g.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),Pu=(t,e,r)=>n=>{if(!hn(n))return n;const[s,i,o,a]=n.match(fs);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Mm=t=>jt(0,255,t),Ws={...sr,transform:t=>Math.round(Mm(t))},Qt={test:ao("rgb","red"),parse:Pu("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Ws.transform(t)+", "+Ws.transform(e)+", "+Ws.transform(r)+", "+Qr(Xr.transform(n))+")"};function Vm(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Si={test:ao("#"),parse:Vm,transform:Qt.transform},_r={test:ao("hsl","hue"),parse:Pu("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+dt.transform(Qr(e))+", "+dt.transform(Qr(r))+", "+Qr(Xr.transform(n))+")"},qe={test:t=>Qt.test(t)||Si.test(t)||_r.test(t),parse:t=>Qt.test(t)?Qt.parse(t):_r.test(t)?_r.parse(t):Si.parse(t),transform:t=>hn(t)?t:t.hasOwnProperty("red")?Qt.transform(t):_r.transform(t)},ke=(t,e,r)=>-r*t+r*e+t;function qs(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function $m({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;s=qs(l,a,t+1/3),i=qs(l,a,t),o=qs(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const zs=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},Um=[Si,Qt,_r],Bm=t=>Um.find(e=>e.test(t));function Ma(t){const e=Bm(t);tt(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`);let r=e.parse(t);return e===_r&&(r=$m(r)),r}const xu=(t,e)=>{const r=Ma(t),n=Ma(e),s={...r};return i=>(s.red=zs(r.red,n.red,i),s.green=zs(r.green,n.green,i),s.blue=zs(r.blue,n.blue,i),s.alpha=ke(r.alpha,n.alpha,i),Qt.transform(s))};function Fm(t){var e,r;return isNaN(t)&&hn(t)&&(((e=t.match(fs))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(Qc))===null||r===void 0?void 0:r.length)||0)>0}const ku={regex:Mg,countKey:"Vars",token:"${v}",parse:Ce},Au={regex:Qc,countKey:"Colors",token:"${c}",parse:qe.parse},Ru={regex:fs,countKey:"Numbers",token:"${n}",parse:sr.parse};function Hs(t,{regex:e,countKey:r,token:n,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+r]=i.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...i.map(s)))}function es(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Hs(r,ku),Hs(r,Au),Hs(r,Ru),r}function Ou(t){return es(t).values}function Cu(t){const{values:e,numColors:r,numVars:n,tokenised:s}=es(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<n?a=a.replace(ku.token,o[l]):l<n+r?a=a.replace(Au.token,qe.transform(o[l])):a=a.replace(Ru.token,Qr(o[l]));return a}}const Nm=t=>typeof t=="number"?0:t;function Wm(t){const e=Ou(t);return Cu(t)(e.map(Nm))}const It={test:Fm,parse:Ou,createTransformer:Cu,getAnimatableNone:Wm},ju=(t,e)=>r=>`${r>0?e:t}`;function Iu(t,e){return typeof t=="number"?r=>ke(t,e,r):qe.test(t)?xu(t,e):t.startsWith("var(")?ju(t,e):Lu(t,e)}const Du=(t,e)=>{const r=[...t],n=r.length,s=t.map((i,o)=>Iu(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}},qm=(t,e)=>{const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=Iu(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},Lu=(t,e)=>{const r=It.createTransformer(e),n=es(t),s=es(e);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Ot(Du(n.values,s.values),r):(pn(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),ju(t,e))},ln=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Va=(t,e)=>r=>ke(t,e,r);function zm(t){return typeof t=="number"?Va:typeof t=="string"?qe.test(t)?xu:Lu:Array.isArray(t)?Du:typeof t=="object"?qm:Va}function Hm(t,e,r){const n=[],s=r||zm(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ce:e;a=Ot(l,a)}n.push(a)}return n}function Mu(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(tt(i===e.length,"Both input and output ranges must be the same length"),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Hm(e,n,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=ln(t[u],t[u+1],c);return o[u](d)};return r?c=>l(jt(t[0],t[i-1],c)):l}function Km(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=ln(0,e,n);t.push(ke(r,1,s))}}function Gm(t){const e=[0];return Km(e,t.length-1),e}function Jm(t,e){return t.map(r=>r*e)}function Ym(t,e){return t.map(()=>e||wu).splice(0,t.length-1)}function ts({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=jm(n)?n.map(La):La(n),i={done:!1,value:e[0]},o=Jm(r&&r.length===e.length?r:Gm(e),t),a=Mu(o,e,{ease:Array.isArray(s)?s:Ym(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function Vu(t,e){return e?t*(1e3/e):0}const Xm=5;function $u(t,e,r){const n=Math.max(e-Xm,0);return Vu(r-t(n),e-n)}const Ks=.001,Qm=.01,$a=10,Zm=.05,ey=1;function ty({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let s,i;pn(t<=Ct($a),"Spring duration must be 10 seconds or less");let o=1-e;o=jt(Zm,ey,o),t=jt(Qm,$a,bt(t)),o<1?(s=c=>{const u=c*o,d=u*t,h=u-r,f=Ti(c,o),g=Math.exp(-d);return Ks-h/f*g},i=c=>{const d=c*o*t,h=d*r+r,f=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-d),p=Ti(Math.pow(c,2),o);return(-s(c)+Ks>0?-1:1)*((h-f)*g)/p}):(s=c=>{const u=Math.exp(-c*t),d=(c-r)*t+1;return-Ks+u*d},i=c=>{const u=Math.exp(-c*t),d=(r-c)*(t*t);return u*d});const a=5/t,l=ny(s,i,a);if(t=Ct(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:t}}}const ry=12;function ny(t,e,r){let n=r;for(let s=1;s<ry;s++)n=n-t(n)/e(n);return n}function Ti(t,e){return t*Math.sqrt(1-e*e)}const sy=["duration","bounce"],iy=["stiffness","damping","mass"];function Ua(t,e){return e.some(r=>t[r]!==void 0)}function oy(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Ua(t,iy)&&Ua(t,sy)){const r=ty(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function Uu({keyframes:t,restDelta:e,restSpeed:r,...n}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:h}=oy({...n,velocity:-bt(n.velocity||0)}),f=d||0,g=l/(2*Math.sqrt(a*c)),p=i-s,m=bt(Math.sqrt(a/c)),S=Math.abs(p)<5;r||(r=S?.01:2),e||(e=S?.005:.5);let v;if(g<1){const _=Ti(m,g);v=E=>{const A=Math.exp(-g*m*E);return i-A*((f+g*m*p)/_*Math.sin(_*E)+p*Math.cos(_*E))}}else if(g===1)v=_=>i-Math.exp(-m*_)*(p+(f+m*p)*_);else{const _=m*Math.sqrt(g*g-1);v=E=>{const A=Math.exp(-g*m*E),I=Math.min(_*E,300);return i-A*((f+g*m*p)*Math.sinh(I)+_*p*Math.cosh(I))/_}}return{calculatedDuration:h&&u||null,next:_=>{const E=v(_);if(h)o.done=_>=u;else{let A=f;_!==0&&(g<1?A=$u(v,_,E):A=0);const I=Math.abs(A)<=r,b=Math.abs(i-E)<=e;o.done=I&&b}return o.value=o.done?i:E,o}}}function Ba({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=R=>a!==void 0&&R<a||l!==void 0&&R>l,g=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let p=r*e;const m=d+p,S=o===void 0?m:o(m);S!==m&&(p=S-d);const v=R=>-p*Math.exp(-R/n),_=R=>S+v(R),E=R=>{const j=v(R),q=_(R);h.done=Math.abs(j)<=c,h.value=h.done?S:q};let A,I;const b=R=>{f(h.value)&&(A=R,I=Uu({keyframes:[h.value,g(h.value)],velocity:$u(_,R,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return b(0),{calculatedDuration:null,next:R=>{let j=!1;return!I&&A===void 0&&(j=!0,E(R),b(R)),A!==void 0&&R>A?I.next(R-A):(!j&&E(R),h)}}}const ay=t=>{const e=({timestamp:r})=>t(r);return{start:()=>_e.update(e,!0),stop:()=>wt(e),now:()=>We.isProcessing?We.timestamp:performance.now()}},Fa=2e4;function Na(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<Fa;)e+=r,n=t.next(e);return e>=Fa?1/0:e}const ly={decay:Ba,inertia:Ba,tween:ts,keyframes:ts,spring:Uu};function rs({autoplay:t=!0,delay:e=0,driver:r=ay,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...h}){let f=1,g=!1,p,m;const S=()=>{m=new Promise(P=>{p=P})};S();let v;const _=ly[s]||ts;let E;_!==ts&&typeof n[0]!="number"&&(tt(n.length===2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${n}`),E=Mu([0,100],n,{clamp:!1}),n=[0,100]);const A=_({...h,keyframes:n});let I;a==="mirror"&&(I=_({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let b="idle",R=null,j=null,q=null;A.calculatedDuration===null&&i&&(A.calculatedDuration=Na(A));const{calculatedDuration:ge}=A;let L=1/0,ee=1/0;ge!==null&&(L=ge+o,ee=L*(i+1)-o);let ie=0;const ye=P=>{if(j===null)return;f>0&&(j=Math.min(j,P)),f<0&&(j=Math.min(P-ee/f,j)),R!==null?ie=R:ie=Math.round(P-j)*f;const F=ie-e*(f>=0?1:-1),U=f>=0?F<0:F>ee;ie=Math.max(F,0),b==="finished"&&R===null&&(ie=ee);let G=ie,Y=A;if(i){const le=Math.min(ie,ee)/L;let se=Math.floor(le),Ee=le%1;!Ee&&le>=1&&(Ee=1),Ee===1&&se--,se=Math.min(se,i+1),!!(se%2)&&(a==="reverse"?(Ee=1-Ee,o&&(Ee-=o/L)):a==="mirror"&&(Y=I)),G=jt(0,1,Ee)*L}const K=U?{done:!1,value:n[0]}:Y.next(G);E&&(K.value=E(K.value));let{done:X}=K;!U&&ge!==null&&(X=f>=0?ie>=ee:ie<=0);const ne=R===null&&(b==="finished"||b==="running"&&X);return d&&d(K.value),ne&&de(),K},te=()=>{v&&v.stop(),v=void 0},Se=()=>{b="idle",te(),p(),S(),j=q=null},de=()=>{b="finished",u&&u(),te(),p()},Ae=()=>{if(g)return;v||(v=r(ye));const P=v.now();l&&l(),R!==null?j=P-R:(!j||b==="finished")&&(j=P),b==="finished"&&S(),q=j,R=null,b="running",v.start()};t&&Ae();const x={then(P,F){return m.then(P,F)},get time(){return bt(ie)},set time(P){P=Ct(P),ie=P,R!==null||!v||f===0?R=P:j=v.now()-P/f},get duration(){const P=A.calculatedDuration===null?Na(A):A.calculatedDuration;return bt(P)},get speed(){return f},set speed(P){P===f||!v||(f=P,x.time=bt(ie))},get state(){return b},play:Ae,pause:()=>{b="paused",R=ie},stop:()=>{g=!0,b!=="idle"&&(b="idle",c&&c(),Se())},cancel:()=>{q!==null&&ye(q),Se()},complete:()=>{b="finished"},sample:P=>(j=0,ye(P))};return x}function cy(t){let e;return()=>(e===void 0&&(e=t()),e)}const uy=cy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),dy=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Vn=10,hy=2e4,fy=(t,e)=>e.type==="spring"||t==="backgroundColor"||!mu(e.ease);function py(t,e,{onUpdate:r,onComplete:n,...s}){if(!(uy()&&dy.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(_=>{a=_})};u();let{keyframes:d,duration:h=300,ease:f,times:g}=s;if(fy(e,s)){const _=rs({...s,repeat:0,delay:0});let E={done:!1,value:d[0]};const A=[];let I=0;for(;!E.done&&I<hy;)E=_.sample(I),A.push(E.value),I+=Vn;g=void 0,d=A,h=I-Vn,f="linear"}const p=Pm(t.owner.current,e,d,{...s,duration:h,ease:f,times:g}),m=()=>{c=!1,p.cancel()},S=()=>{c=!0,_e.update(m),a(),u()};return p.onfinish=()=>{c||(t.set(xm(d,s)),n&&n(),S())},{then(_,E){return l.then(_,E)},attachTimeline(_){return p.timeline=_,p.onfinish=null,Ce},get time(){return bt(p.currentTime||0)},set time(_){p.currentTime=Ct(_)},get speed(){return p.playbackRate},set speed(_){p.playbackRate=_},get duration(){return bt(h)},play:()=>{o||(p.play(),wt(m))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:_}=p;if(_){const E=rs({...s,autoplay:!1});t.setWithVelocity(E.sample(_-Vn).value,E.sample(_).value,Vn)}S()},complete:()=>{c||p.finish()},cancel:S}}function gy({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const s=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Ce,pause:Ce,stop:Ce,then:i=>(i(),Promise.resolve()),cancel:Ce,complete:Ce});return e?rs({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const my={type:"spring",stiffness:500,damping:25,restSpeed:10},yy=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),vy={type:"keyframes",duration:.8},by={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wy=(t,{keyframes:e})=>e.length>2?vy:nr.has(t)?t.startsWith("scale")?yy(e[1]):my:by,Ei=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(It.test(e)||e==="0")&&!e.startsWith("url(")),_y=new Set(["brightness","contrast","saturate","opacity"]);function Sy(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(fs)||[];if(!n)return t;const s=r.replace(n,"");let i=_y.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const Ty=/([a-z-]*)\(.*?\)/g,Pi={...It,getAnimatableNone:t=>{const e=t.match(Ty);return e?e.map(Sy).join(" "):t}},Ey={...Zc,color:qe,backgroundColor:qe,outlineColor:qe,fill:qe,stroke:qe,borderColor:qe,borderTopColor:qe,borderRightColor:qe,borderBottomColor:qe,borderLeftColor:qe,filter:Pi,WebkitFilter:Pi},lo=t=>Ey[t];function Bu(t,e){let r=lo(t);return r!==Pi&&(r=It),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Fu=t=>/^0[^.\s]+$/.test(t);function Py(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Fu(t)}function xy(t,e,r,n){const s=Ei(e,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),Py(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];i[u]=Bu(e,a)}return i}function ky({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function co(t,e){return t[e]||t.default||t}const Ay={skipAnimations:!1},uo=(t,e,r,n={})=>s=>{const i=co(n,t)||{},o=i.delay||n.delay||0;let{elapsed:a=0}=n;a=a-Ct(o);const l=xy(e,t,r,i),c=l[0],u=l[l.length-1],d=Ei(t,c),h=Ei(t,u);pn(d===h,`You are trying to animate ${t} from "${c}" to "${u}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${u} via the \`style\` property.`);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{e.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(ky(i)||(f={...f,...wy(t,f)}),f.duration&&(f.duration=Ct(f.duration)),f.repeatDelay&&(f.repeatDelay=Ct(f.repeatDelay)),!d||!h||Em.current||i.type===!1||Ay.skipAnimations)return gy(f);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=py(e,t,f);if(g)return g}return rs(f)};function ns(t){return!!(Ke(t)&&t.add)}const Nu=t=>/^\-?\d*\.?\d+$/.test(t);function ho(t,e){t.indexOf(e)===-1&&t.push(e)}function fo(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class po{constructor(){this.subscriptions=[]}add(e){return ho(this.subscriptions,e),()=>fo(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wa=new Set;function go(t,e,r){t||Wa.has(e)||(console.warn(e),Wa.add(e))}const Ry=t=>!isNaN(parseFloat(t));class Oy{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=We;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,_e.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_e.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Ry(this.current),this.owner=r.owner}onChange(e){return go(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new po);const n=this.events[e].add(r);return e==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Vu(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rr(t,e){return new Oy(t,e)}const Wu=t=>e=>e.test(t),Cy={test:t=>t==="auto",parse:t=>t},qu=[sr,J,dt,xt,Bg,Ug,Cy],Nr=t=>qu.find(Wu(t)),jy=[...qu,qe,It],Iy=t=>jy.find(Wu(t));function Dy(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Rr(r))}function Ly(t,e){const r=gs(t,e);let{transitionEnd:n={},transition:s={},...i}=r?t.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const a=em(i[o]);Dy(t,o,a)}}function My(t,e,r){var n,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(n=r[l])!==null&&n!==void 0?n:t.readValue(l))!==null&&s!==void 0?s:e[l]),u!=null&&(typeof u=="string"&&(Nu(u)||Fu(u))?u=parseFloat(u):!Iy(u)&&It.test(c)&&(u=Bu(l,c)),t.addValue(l,Rr(u,{owner:t})),r[l]===void 0&&(r[l]=u),u!==null&&t.setBaseTarget(l,u))}}function Vy(t,e){return e?(e[t]||e.default||e).from:void 0}function $y(t,e,r){const n={};for(const s in t){const i=Vy(s,e);if(i!==void 0)n[s]=i;else{const o=r.getValue(s);o&&(n[s]=o.get())}}return n}function Uy({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function By(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function zu(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");n&&(i=n);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const h=t.getValue(d),f=a[d];if(!h||f===void 0||u&&Uy(u,d))continue;const g={delay:r,elapsed:0,...co(i||{},d)};if(window.HandoffAppearAnimations){const S=t.getProps()[Hc];if(S){const v=window.HandoffAppearAnimations(S,d,h,_e);v!==null&&(g.elapsed=v,g.isHandoff=!0)}}let p=!g.isHandoff&&!By(h,f);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(p=!1),h.animation&&(p=!1),p)continue;h.start(uo(d,h,f,t.shouldReduceMotion&&nr.has(d)?{type:!1}:g));const m=h.animation;ns(l)&&(l.add(d),m.then(()=>l.remove(d))),c.push(m)}return o&&Promise.all(c).then(()=>{o&&Ly(t,o)}),c}function xi(t,e,r={}){const n=gs(t,e,r.custom);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(zu(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=s;return Fy(t,e,c+l,u,d,r)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function Fy(t,e,r=0,n=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*n,l=s===1?(c=0)=>c*n:(c=0)=>a-c*n;return Array.from(t.variantChildren).sort(Ny).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(xi(c,e,{...i,delay:r+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Ny(t,e){return t.sortNodePosition(e)}function Wy(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>xi(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=xi(t,e,r);else{const s=typeof e=="function"?gs(t,e,r.custom):e;n=Promise.all(zu(t,s,r))}return n.then(()=>t.notify("AnimationComplete",e))}const qy=[...Ji].reverse(),zy=Ji.length;function Hy(t){return e=>Promise.all(e.map(({animation:r,options:n})=>Wy(t,r,n)))}function Ky(t){let e=Hy(t);const r=Jy();let n=!0;const s=(l,c)=>{const u=gs(t,c);if(u){const{transition:d,transitionEnd:h,...f}=u;l={...l,...f,...h}}return l};function i(l){e=l(t)}function o(l,c){const u=t.getProps(),d=t.getVariantContext(!0)||{},h=[],f=new Set;let g={},p=1/0;for(let S=0;S<zy;S++){const v=qy[S],_=r[v],E=u[v]!==void 0?u[v]:d[v],A=on(E),I=v===c?_.isActive:null;I===!1&&(p=S);let b=E===d[v]&&E!==u[v]&&A;if(b&&n&&t.manuallyAnimateOnMount&&(b=!1),_.protectedKeys={...g},!_.isActive&&I===null||!E&&!_.prevProp||ds(E)||typeof E=="boolean")continue;let j=Gy(_.prevProp,E)||v===c&&_.isActive&&!b&&A||S>p&&A,q=!1;const ge=Array.isArray(E)?E:[E];let L=ge.reduce(s,{});I===!1&&(L={});const{prevResolvedValues:ee={}}=_,ie={...ee,...L},ye=te=>{j=!0,f.has(te)&&(q=!0,f.delete(te)),_.needsAnimating[te]=!0};for(const te in ie){const Se=L[te],de=ee[te];if(g.hasOwnProperty(te))continue;let Ae=!1;Zn(Se)&&Zn(de)?Ae=!pu(Se,de):Ae=Se!==de,Ae?Se!==void 0?ye(te):f.add(te):Se!==void 0&&f.has(te)?ye(te):_.protectedKeys[te]=!0}_.prevProp=E,_.prevResolvedValues=L,_.isActive&&(g={...g,...L}),n&&t.blockInitialAnimation&&(j=!1),j&&(!b||q)&&h.push(...ge.map(te=>({animation:te,options:{type:v,...l}})))}if(f.size){const S={};f.forEach(v=>{const _=t.getBaseTarget(v);_!==void 0&&(S[v]=_)}),h.push({animation:S})}let m=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),n=!1,m?e(h):Promise.resolve()}function a(l,c,u){var d;if(r[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),r[l].isActive=c;const h=o(u,l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r}}function Gy(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pu(e,t):!1}function Ft(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jy(){return{animate:Ft(!0),whileInView:Ft(),whileHover:Ft(),whileTap:Ft(),whileDrag:Ft(),whileFocus:Ft(),exit:Ft()}}class Yy extends Lt{constructor(e){super(e),e.animationState||(e.animationState=Ky(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ds(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Xy=0;class Qy extends Lt{constructor(){super(...arguments),this.id=Xy++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Zy={animation:{Feature:Yy},exit:{Feature:Qy}},qa=(t,e)=>Math.abs(t-e);function ev(t,e){const r=qa(t.x,e.x),n=qa(t.y,e.y);return Math.sqrt(r**2+n**2)}class Hu{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Js(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=ev(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:g}=d,{timestamp:p}=We;this.history.push({...g,timestamp:p});const{onStart:m,onMove:S}=this.handlers;h||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Gs(h,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Js(d.type==="pointercancel"?this.lastMoveEventInfo:Gs(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,m),g&&g(d,m)},!cu(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=ps(e),a=Gs(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=We;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=r;u&&u(e,Js(a,this.history)),this.removeListeners=Ot(vt(this.contextWindow,"pointermove",this.handlePointerMove),vt(this.contextWindow,"pointerup",this.handlePointerUp),vt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wt(this.updatePoint)}}function Gs(t,e){return e?{point:e(t.point)}:t}function za(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Js({point:t},e){return{point:t,delta:za(t,Ku(e)),offset:za(t,tv(e)),velocity:rv(e,.1)}}function tv(t){return t[0]}function Ku(t){return t[t.length-1]}function rv(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=Ku(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>Ct(e)));)r--;if(!n)return{x:0,y:0};const i=bt(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Qe(t){return t.max-t.min}function ki(t,e=0,r=.01){return Math.abs(t-e)<=r}function Ha(t,e,r,n=.5){t.origin=n,t.originPoint=ke(e.min,e.max,t.origin),t.scale=Qe(r)/Qe(e),(ki(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ke(r.min,r.max,t.origin)-t.originPoint,(ki(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Zr(t,e,r,n){Ha(t.x,e.x,r.x,n?n.originX:void 0),Ha(t.y,e.y,r.y,n?n.originY:void 0)}function Ka(t,e,r){t.min=r.min+e.min,t.max=t.min+Qe(e)}function nv(t,e,r){Ka(t.x,e.x,r.x),Ka(t.y,e.y,r.y)}function Ga(t,e,r){t.min=e.min-r.min,t.max=t.min+Qe(e)}function en(t,e,r){Ga(t.x,e.x,r.x),Ga(t.y,e.y,r.y)}function sv(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?ke(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?ke(r,t,n.max):Math.min(t,r)),t}function Ja(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function iv(t,{top:e,left:r,bottom:n,right:s}){return{x:Ja(t.x,r,s),y:Ja(t.y,e,n)}}function Ya(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function ov(t,e){return{x:Ya(t.x,e.x),y:Ya(t.y,e.y)}}function av(t,e){let r=.5;const n=Qe(t),s=Qe(e);return s>n?r=ln(e.min,e.max-n,t.min):n>s&&(r=ln(t.min,t.max-s,e.min)),jt(0,1,r)}function lv(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Ai=.35;function cv(t=Ai){return t===!1?t=0:t===!0&&(t=Ai),{x:Xa(t,"left","right"),y:Xa(t,"top","bottom")}}function Xa(t,e,r){return{min:Qa(t,e),max:Qa(t,r)}}function Qa(t,e){return typeof t=="number"?t:t[e]||0}const Za=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sr=()=>({x:Za(),y:Za()}),el=()=>({min:0,max:0}),De=()=>({x:el(),y:el()});function et(t){return[t("x"),t("y")]}function Gu({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function uv({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dv(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Ys(t){return t===void 0||t===1}function Ri({scale:t,scaleX:e,scaleY:r}){return!Ys(t)||!Ys(e)||!Ys(r)}function Wt(t){return Ri(t)||Ju(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Ju(t){return tl(t.x)||tl(t.y)}function tl(t){return t&&t!=="0%"}function ss(t,e,r){const n=t-r,s=e*n;return r+s}function rl(t,e,r,n,s){return s!==void 0&&(t=ss(t,s,n)),ss(t,r,n)+e}function Oi(t,e=0,r=1,n,s){t.min=rl(t.min,e,r,n,s),t.max=rl(t.max,e,r,n,s)}function Yu(t,{x:e,y:r}){Oi(t.x,e.translate,e.scale,e.originPoint),Oi(t.y,r.translate,r.scale,r.originPoint)}function hv(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Tr(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Yu(t,o)),n&&Wt(i.latestValues)&&Tr(t,i.latestValues))}e.x=nl(e.x),e.y=nl(e.y)}function nl(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function kt(t,e){t.min=t.min+e,t.max=t.max+e}function sl(t,e,[r,n,s]){const i=e[s]!==void 0?e[s]:.5,o=ke(t.min,t.max,i);Oi(t,e[r],e[n],o,e.scale)}const fv=["x","scaleX","originX"],pv=["y","scaleY","originY"];function Tr(t,e){sl(t.x,e,fv),sl(t.y,e,pv)}function Xu(t,e){return Gu(dv(t.getBoundingClientRect(),e))}function gv(t,e,r){const n=Xu(t,r),{scroll:s}=e;return s&&(kt(n.x,s.offset.x),kt(n.y,s.offset.y)),n}const Qu=({current:t})=>t?t.ownerDocument.defaultView:null,mv=new WeakMap;class yv{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ps(u,"page").point)},i=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:g}=this.getProps();if(h&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=du(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),et(m=>{let S=this.getAxisMotionValue(m).get()||0;if(dt.test(S)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[m];_&&(S=Qe(_)*(parseFloat(S)/100))}}this.originPoint[m]=S}),g&&_e.update(()=>g(u,d),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:m}=d;if(f&&this.currentDirection===null){this.currentDirection=vv(m),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),p&&p(u,d)},a=(u,d)=>this.stop(u,d),l=()=>et(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Hu(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Qu(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&_e.update(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!$n(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=sv(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&wr(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=iv(s.layoutBox,r):this.constraints=!1,this.elastic=cv(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&et(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=lv(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!wr(e))return!1;const n=e.current;tt(n!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=gv(n,s.root,this.visualElement.getTransformPagePoint());let o=ov(s.layout.layoutBox,i);if(r){const a=r(uv(o));this.hasMutatedConstraints=!!a,a&&(o=Gu(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=et(u=>{if(!$n(u,r,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:n?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(uo(e,n,0,r))}stopAnimation(){et(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){et(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){et(r=>{const{drag:n}=this.getProps();if(!$n(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(e[r]-ke(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!wr(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};et(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=av({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),et(o=>{if(!$n(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ke(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;mv.set(this.visualElement,this);const e=this.visualElement.current,r=vt(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();wr(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const o=yt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(et(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ai,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function $n(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function vv(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class bv extends Lt{constructor(e){super(e),this.removeGroupControls=Ce,this.removeListeners=Ce,this.controls=new yv(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ce}unmount(){this.removeGroupControls(),this.removeListeners()}}const il=t=>(e,r)=>{t&&_e.update(()=>t(e,r))};class wv extends Lt{constructor(){super(...arguments),this.removePointerDownListener=Ce}onPointerDown(e){this.session=new Hu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qu(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:il(e),onStart:il(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&_e.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=vt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _v(){const t=C.useContext(cs);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,s=C.useId();return C.useEffect(()=>n(s),[]),!e&&r?[!1,()=>r&&r(s)]:[!0]}const qn={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ol(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(J.test(t))t=parseFloat(t);else return t;const r=ol(t,e.target.x),n=ol(t,e.target.y);return`${r}% ${n}%`}},Sv={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=It.parse(t);if(s.length>5)return n;const i=It.createTransformer(t),o=typeof s[0]!="number"?1:0,a=r.x.scale*e.x,l=r.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ke(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class Tv extends Il.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;jg(Ev),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qn.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||_e.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zu(t){const[e,r]=_v(),n=C.useContext(Xi);return Il.createElement(Tv,{...t,layoutGroup:n,switchLayoutGroup:C.useContext(Gc),isPresent:e,safeToRemove:r})}const Ev={borderRadius:{...Wr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wr,borderTopRightRadius:Wr,borderBottomLeftRadius:Wr,borderBottomRightRadius:Wr,boxShadow:Sv},ed=["TopLeft","TopRight","BottomLeft","BottomRight"],Pv=ed.length,al=t=>typeof t=="string"?parseFloat(t):t,ll=t=>typeof t=="number"||J.test(t);function xv(t,e,r,n,s,i){s?(t.opacity=ke(0,r.opacity!==void 0?r.opacity:1,kv(n)),t.opacityExit=ke(e.opacity!==void 0?e.opacity:1,0,Av(n))):i&&(t.opacity=ke(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<Pv;o++){const a=`border${ed[o]}Radius`;let l=cl(e,a),c=cl(r,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||ll(l)===ll(c)?(t[a]=Math.max(ke(al(l),al(c),n),0),(dt.test(c)||dt.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||r.rotate)&&(t.rotate=ke(e.rotate||0,r.rotate||0,n))}function cl(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kv=td(0,.5,Tu),Av=td(.5,.95,Ce);function td(t,e,r){return n=>n<t?0:n>e?1:r(ln(t,e,n))}function ul(t,e){t.min=e.min,t.max=e.max}function Ze(t,e){ul(t.x,e.x),ul(t.y,e.y)}function dl(t,e,r,n,s){return t-=e,t=ss(t,1/r,n),s!==void 0&&(t=ss(t,1/s,n)),t}function Rv(t,e=0,r=1,n=.5,s,i=t,o=t){if(dt.test(e)&&(e=parseFloat(e),e=ke(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ke(i.min,i.max,n);t===i&&(a-=e),t.min=dl(t.min,e,r,a,s),t.max=dl(t.max,e,r,a,s)}function hl(t,e,[r,n,s],i,o){Rv(t,e[r],e[n],e[s],e.scale,i,o)}const Ov=["x","scaleX","originX"],Cv=["y","scaleY","originY"];function fl(t,e,r,n){hl(t.x,e,Ov,r?r.x:void 0,n?n.x:void 0),hl(t.y,e,Cv,r?r.y:void 0,n?n.y:void 0)}function pl(t){return t.translate===0&&t.scale===1}function rd(t){return pl(t.x)&&pl(t.y)}function jv(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function nd(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function gl(t){return Qe(t.x)/Qe(t.y)}class Iv{constructor(){this.members=[]}add(e){ho(this.members,e),e.scheduleRender()}remove(e){if(fo(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ml(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:l,rotateX:c,rotateY:u}=r;l&&(n+=`rotate(${l}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(n+=`scale(${o}, ${a})`),n||"none"}const Dv=(t,e)=>t.depth-e.depth;class Lv{constructor(){this.children=[],this.isDirty=!1}add(e){ho(this.children,e),this.isDirty=!0}remove(e){fo(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Dv),this.isDirty=!1,this.children.forEach(e)}}function Mv(t,e){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(wt(n),t(i-e))};return _e.read(n,!0),()=>wt(n)}function Vv(t){window.MotionDebug&&window.MotionDebug.record(t)}function $v(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Uv(t,e,r){const n=Ke(t)?t:Rr(t);return n.start(uo("",n,e,r)),n.animation}const yl=["","X","Y","Z"],Bv={visibility:"hidden"},vl=1e3;let Fv=0;const qt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function sd({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},a=e?.()){this.id=Fv++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qt.totalNodes=qt.resolvedTargetDeltas=qt.recalculatedProjection=0,this.nodes.forEach(qv),this.nodes.forEach(Jv),this.nodes.forEach(Yv),this.nodes.forEach(zv),Vv(qt)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lv)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new po),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$v(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Mv(h,250),qn.hasAnimatedSinceResize&&(qn.hasAnimatedSinceResize=!1,this.nodes.forEach(wl))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||tb,{onLayoutAnimationStart:m,onLayoutAnimationComplete:S}=u.getProps(),v=!this.targetLayout||!nd(this.targetLayout,g)||f,_=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const E={...co(p,"layout"),onPlay:m,onComplete:S};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||wl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Xv),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bl);return}this.isUpdating||this.nodes.forEach(Kv),this.isUpdating=!1,this.nodes.forEach(Gv),this.nodes.forEach(Nv),this.nodes.forEach(Wv),this.clearAllSnapshots();const a=performance.now();We.delta=jt(0,1e3/60,a-We.timestamp),We.timestamp=a,We.isProcessing=!0,Bs.update.process(We),Bs.preRender.process(We),Bs.render.process(We),We.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Hv),this.sharedNodes.forEach(Qv)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!rd(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Wt(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),rb(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return De();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(kt(a.x,l.offset.x),kt(a.y,l.offset.y)),a}removeElementScroll(o){const a=De();Ze(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Ze(a,o);const{scroll:h}=this.root;h&&(kt(a.x,-h.offset.x),kt(a.y,-h.offset.y))}kt(a.x,u.offset.x),kt(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=De();Ze(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Tr(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Wt(u.latestValues)&&Tr(l,u.latestValues)}return Wt(this.latestValues)&&Tr(l,this.latestValues),l}removeTransform(o){const a=De();Ze(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Wt(c.latestValues))continue;Ri(c.latestValues)&&c.updateSnapshot();const u=De(),d=c.measurePageBox();Ze(u,d),fl(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Wt(this.latestValues)&&fl(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==We.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=We.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),en(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ze(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nv(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ze(this.target,this.layout.layoutBox),Yu(this.target,this.targetDelta)):Ze(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),en(this.relativeTargetOrigin,this.target,f.target),Ze(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ri(this.parent.latestValues)||Ju(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===We.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ze(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;hv(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Sr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Sr(),this.projectionDeltaWithTransform=Sr());const p=this.projectionTransform;Zr(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=ml(this.projectionDelta,this.treeScale),(this.projectionTransform!==p||this.treeScale.x!==h||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),qt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Sr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=De(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,p=f!==g,m=this.getStack(),S=!m||m.members.length<=1,v=!!(p&&!S&&this.options.crossfade===!0&&!this.path.some(eb));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const A=E/1e3;_l(d.x,o.x,A),_l(d.y,o.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(en(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zv(this.relativeTarget,this.relativeTargetOrigin,h,A),_&&jv(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=De()),Ze(_,this.relativeTarget)),p&&(this.animationValues=u,xv(u,c,this.latestValues,A,v,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{qn.hasAnimatedSinceResize=!0,this.currentAnimation=Uv(0,vl,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vl),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&id(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||De();const d=Qe(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Qe(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}Ze(a,l),Tr(a,u),Zr(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Iv),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<yl.length;u++){const d="rotate"+yl[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Bv;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Wn(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Wn(o?.pointerEvents)||""),this.hasProjected&&!Wt(this.latestValues)&&(p.transform=u?u({},""):"none",this.hasProjected=!1),p}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=ml(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:g}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in Xn){if(h[p]===void 0)continue;const{correct:m,applyTo:S}=Xn[p],v=c.transform==="none"?h[p]:m(h[p],d);if(S){const _=S.length;for(let E=0;E<_;E++)c[S[E]]=v}else c[p]=v}return this.options.layoutId&&(c.pointerEvents=d===this?Wn(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(bl),this.root.sharedNodes.clear()}}}function Nv(t){t.updateLayout()}function Wv(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?et(d=>{const h=o?r.measuredBox[d]:r.layoutBox[d],f=Qe(h);h.min=n[d].min,h.max=h.min+f}):id(i,r.layoutBox,n)&&et(d=>{const h=o?r.measuredBox[d]:r.layoutBox[d],f=Qe(n[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=Sr();Zr(a,n,r.layoutBox);const l=Sr();o?Zr(l,t.applyTransform(s,!0),r.measuredBox):Zr(l,n,r.layoutBox);const c=!rd(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const g=De();en(g,r.layoutBox,h.layoutBox);const p=De();en(p,n,f.layoutBox),nd(g,p)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function qv(t){qt.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function zv(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Hv(t){t.clearSnapshot()}function bl(t){t.clearMeasurements()}function Kv(t){t.isLayoutDirty=!1}function Gv(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wl(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Jv(t){t.resolveTargetDelta()}function Yv(t){t.calcProjection()}function Xv(t){t.resetRotation()}function Qv(t){t.removeLeadSnapshot()}function _l(t,e,r){t.translate=ke(e.translate,0,r),t.scale=ke(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Sl(t,e,r,n){t.min=ke(e.min,r.min,n),t.max=ke(e.max,r.max,n)}function Zv(t,e,r,n){Sl(t.x,e.x,r.x,n),Sl(t.y,e.y,r.y,n)}function eb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tb={duration:.45,ease:[.4,0,.1,1]},Tl=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),El=Tl("applewebkit/")&&!Tl("chrome/")?Math.round:Ce;function Pl(t){t.min=El(t.min),t.max=El(t.max)}function rb(t){Pl(t.x),Pl(t.y)}function id(t,e,r){return t==="position"||t==="preserve-aspect"&&!ki(gl(e),gl(r),.2)}const nb=sd({attachResizeListener:(t,e)=>yt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xs={current:void 0},od=sd({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xs.current){const t=new nb({});t.mount(window),t.setOptions({layoutScroll:!0}),Xs.current=t}return Xs.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sb={pan:{Feature:wv},drag:{Feature:bv,ProjectionNode:od,MeasureLayout:Zu}},ib=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ob(t){const e=ib.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}const ab=4;function Ci(t,e,r=1){tt(r<=ab,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[n,s]=ob(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return Nu(o)?parseFloat(o):o}else return wi(s)?Ci(s,e,r+1):s}function lb(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(s=>{const i=s.get();if(!wi(i))return;const o=Ci(i,n);o&&s.set(o)});for(const s in e){const i=e[s];if(!wi(i))continue;const o=Ci(i,n);o&&(e[s]=o,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:e,transitionEnd:r}}const cb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ad=t=>cb.has(t),ub=t=>Object.keys(t).some(ad),Un=t=>t===sr||t===J,xl=(t,e)=>parseFloat(t.split(", ")[e]),kl=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return xl(s[1],e);{const i=n.match(/^matrix\((.+)\)$/);return i?xl(i[1],t):0}},db=new Set(["x","y","z"]),hb=dn.filter(t=>!db.has(t));function fb(t){const e=[];return hb.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Or={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:kl(4,13),y:kl(5,14)};Or.translateX=Or.x;Or.translateY=Or.y;const pb=(t,e,r)=>{const n=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(c=>{a[c]=Or[c](n,i)}),e.render();const l=e.measureViewportBox();return r.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Or[c](l,i)}),t},gb=(t,e,r={},n={})=>{e={...e},n={...n};const s=Object.keys(e).filter(ad);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=r[l],d=Nr(u);const h=e[l];let f;if(Zn(h)){const g=h.length,p=h[0]===null?1:0;u=h[p],d=Nr(u);for(let m=p;m<g&&h[m]!==null;m++)f?tt(Nr(h[m])===f,"All keyframes must be of the same type"):(f=Nr(h[m]),tt(f===d||Un(d)&&Un(f),"Keyframes must be of the same dimension as the current value"))}else f=Nr(h);if(d!==f)if(Un(d)&&Un(f)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof h=="string"?e[l]=parseFloat(h):Array.isArray(h)&&f===J&&(e[l]=h.map(parseFloat))}else d?.transform&&f?.transform&&(u===0||h===0)?u===0?c.set(f.transform(u)):e[l]=d.transform(h):(o||(i=fb(t),o=!0),a.push(l),n[l]=n[l]!==void 0?n[l]:e[l],c.jump(h))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=pb(e,t,a);return i.length&&i.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),us&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:n}}else return{target:e,transitionEnd:n}};function mb(t,e,r,n){return ub(e)?gb(t,e,r,n):{target:e,transitionEnd:n}}const yb=(t,e,r,n)=>{const s=lb(t,e,n);return e=s.target,n=s.transitionEnd,mb(t,e,r,n)},ji={current:null},ld={current:!1};function vb(){if(ld.current=!0,!!us)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ji.current=t.matches;t.addListener(e),e()}else ji.current=!1}function bb(t,e,r){const{willChange:n}=e;for(const s in e){const i=e[s],o=r[s];if(Ke(i))t.addValue(s,i),ns(n)&&n.add(s),go(i.version==="10.18.0",`Attempting to mix Framer Motion versions ${i.version} with 10.18.0 may not work as expected.`);else if(Ke(o))t.addValue(s,Rr(i,{owner:t})),ns(n)&&n.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Rr(a!==void 0?a:i,{owner:t}))}}for(const s in r)e[s]===void 0&&t.removeValue(s);return e}const Al=new WeakMap,cd=Object.keys(an),wb=cd.length,Rl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],_b=Yi.length;class Sb{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_e.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=r.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=hs(r),this.isVariantNode=Kc(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const d in u){const h=u[d];a[d]!==void 0&&Ke(h)&&(h.set(a[d],!1),ns(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,Al.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),ld.current||vb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ji.current,go(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected."),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Al.delete(this.current),this.projection&&this.projection.unmount(),wt(this.notifyUpdate),wt(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=nr.has(e),s=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&_e.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,s,i){let o,a;if(s&&n){const l="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";r.ignoreStrict?pn(!1,l):tt(!1,l)}for(let l=0;l<wb;l++){const c=cd[l],{isEnabled:u,Feature:d,ProjectionNode:h,MeasureLayout:f}=an[c];h&&(o=h),u(r)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),f&&(a=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:f}=r;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&wr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Rl.length;n++){const s=Rl[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=bb(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<_b;n++){const s=Yi[n],i=this.props[s];(on(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Rr(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=so(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ke(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new po),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class ud extends Sb{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:s},i){let o=$y(n,e||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),o&&(o=s(o))),i){My(this,n,o);const a=yb(this,n,o,r);r=a.transitionEnd,n=a.target}return{transition:e,transitionEnd:r,...n}}}function Tb(t){return window.getComputedStyle(t)}class Eb extends ud{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(nr.has(r)){const n=lo(r);return n&&n.default||0}else{const n=Tb(e),s=(Xc(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Xu(e,r)}build(e,r,n,s){Zi(e,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,r){return no(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ke(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,s){nu(e,r,n,s)}}class Pb extends ud{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(nr.has(r)){const n=lo(r);return n&&n.default||0}return r=su.has(r)?r:Gi(r),e.getAttribute(r)}measureInstanceViewportBox(){return De()}scrapeMotionValuesFromProps(e,r){return ou(e,r)}build(e,r,n,s){to(e,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,r,n,s){iu(e,r,n,s)}mount(e){this.isSVGTag=ro(e.tagName),super.mount(e)}}const xb=(t,e)=>Qi(t)?new Pb(e,{enableHardwareAcceleration:!1}):new Eb(e,{enableHardwareAcceleration:!0}),kb={layout:{ProjectionNode:od,MeasureLayout:Zu}},Ab={...Zy,..._m,...sb,...kb},iw=Og((t,e)=>lm(t,e,Ab,xb));function dd(){const t=C.useRef(!1);return Ki(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Rb(){const t=dd(),[e,r]=C.useState(0),n=C.useCallback(()=>{t.current&&r(e+1)},[e]);return[C.useCallback(()=>_e.postRender(n),[n]),e]}class Ob extends C.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Cb({children:t,isPresent:e}){const r=C.useId(),n=C.useRef(null),s=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),C.createElement(Ob,{isPresent:e,childRef:n,sizeRef:s},C.cloneElement(t,{ref:n}))}const Qs=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=au(jb),l=C.useId(),c=C.useMemo(()=>({id:l,initial:e,isPresent:r,custom:s,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;n&&n()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[r]);return C.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[r]),C.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=C.createElement(Cb,{isPresent:r},t)),C.createElement(cs.Provider,{value:c},t)};function jb(){return new Map}function Ib(t){return C.useEffect(()=>()=>t(),[])}const zt=t=>t.key||"";function Db(t,e){t.forEach(r=>{const n=zt(r);e.set(n,r)})}function Lb(t){const e=[];return C.Children.forEach(t,r=>{C.isValidElement(r)&&e.push(r)}),e}const ow=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{tt(!s,"Replace exitBeforeEnter with mode='wait'");const a=C.useContext(Xi).forceRender||Rb()[0],l=dd(),c=Lb(t);let u=c;const d=C.useRef(new Map).current,h=C.useRef(u),f=C.useRef(new Map).current,g=C.useRef(!0);if(Ki(()=>{g.current=!1,Db(c,f),h.current=u}),Ib(()=>{g.current=!0,f.clear(),d.clear()}),g.current)return C.createElement(C.Fragment,null,u.map(v=>C.createElement(Qs,{key:zt(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},v)));u=[...u];const p=h.current.map(zt),m=c.map(zt),S=p.length;for(let v=0;v<S;v++){const _=p[v];m.indexOf(_)===-1&&!d.has(_)&&d.set(_,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((v,_)=>{if(m.indexOf(_)!==-1)return;const E=f.get(_);if(!E)return;const A=p.indexOf(_);let I=v;if(!I){const b=()=>{d.delete(_);const R=Array.from(f.keys()).filter(j=>!m.includes(j));if(R.forEach(j=>f.delete(j)),h.current=c.filter(j=>{const q=zt(j);return q===_||R.includes(q)}),!d.size){if(l.current===!1)return;a(),n&&n()}};I=C.createElement(Qs,{key:zt(E),isPresent:!1,onExitComplete:b,custom:e,presenceAffectsLayout:i,mode:o},E),d.set(_,I)}u.splice(A,0,I)}),u=u.map(v=>{const _=v.key;return d.has(_)?v:C.createElement(Qs,{key:zt(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),o==="wait"&&u.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`),C.createElement(C.Fragment,null,d.size?u:u.map(v=>C.cloneElement(v)))};function Zs(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Mb(t,e){var r=C.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var Vb=typeof window<"u"?C.useLayoutEffect:C.useEffect,Ol=new WeakMap;function aw(t,e){var r=Mb(null,function(n){return t.forEach(function(s){return Zs(s,n)})});return Vb(function(){var n=Ol.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(a){i.has(a)||Zs(a,null)}),i.forEach(function(a){s.has(a)||Zs(a,o)})}Ol.set(r,t)},[t]),r}function $b(t){return t}function Ub(t,e){e===void 0&&(e=$b);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return s}function lw(t){t===void 0&&(t={});var e=Ub(null);return e.options=xr({async:!0,ssr:!1},t),e}var hd=function(t){var e=t.sideCar,r=tr(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return C.createElement(n,xr({},r))};hd.isSideCarExport=!0;function cw(t,e){return t.useMedium(e),hd}var uw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__},Bb=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},mr=new WeakMap,Bn=new WeakMap,Fn={},ei=0,fd=function(t){return t&&(t.host||fd(t.parentNode))},Fb=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=fd(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Nb=function(t,e,r,n){var s=Fb(e,Array.isArray(t)?t:[t]);Fn[r]||(Fn[r]=new WeakMap);var i=Fn[r],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(n),g=f!==null&&f!=="false",p=(mr.get(h)||0)+1,m=(i.get(h)||0)+1;mr.set(h,p),i.set(h,m),o.push(h),p===1&&g&&Bn.set(h,!0),m===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(S){console.error("aria-hidden: cannot operate on ",h,S)}})};return u(e),a.clear(),ei++,function(){o.forEach(function(d){var h=mr.get(d)-1,f=i.get(d)-1;mr.set(d,h),i.set(d,f),h||(Bn.has(d)||d.removeAttribute(n),Bn.delete(d)),f||d.removeAttribute(r)}),ei--,ei||(mr=new WeakMap,mr=new WeakMap,Bn=new WeakMap,Fn={})}},dw=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=Bb(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Nb(n,s,r,"aria-hidden")):function(){return null}};export{Ve as A,tw as B,iw as C,ow as D,ti as E,rw as P,tr as _,Bd as a,Hn as b,Hb as c,zb as d,cn as e,Po as f,Ud as g,Kb as h,we as i,Kr as j,lw as k,xr as l,yr as m,uw as n,nw as o,Zt as p,ac as q,qb as r,is as s,cw as t,aw as u,dw as v,Pr as w,Jb as x,mh as y,Gb as z};
//# sourceMappingURL=vendor-CsuQVNWc.js.map
